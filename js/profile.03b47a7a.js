(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{"0044":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={key:0,class:"p-divider-content"};function i(e,t,n,i,a,s){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:s.containerClass,role:"separator"},[e.$slots.default?(Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["renderSlot"])(e.$slots,"default")])):Object(r["createCommentVNode"])("",!0)],2)}var a={props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},computed:{containerClass:function(){return["p-divider p-component","p-divider-"+this.layout,"p-divider-"+this.type,{"p-divider-left":"horizontal"===this.layout&&(!this.align||"left"===this.align)},{"p-divider-center":"horizontal"===this.layout&&"center"===this.align},{"p-divider-right":"horizontal"===this.layout&&"right"===this.align},{"p-divider-top":"vertical"===this.layout&&"top"===this.align},{"p-divider-center":"vertical"===this.layout&&(!this.align||"center"===this.align)},{"p-divider-bottom":"vertical"===this.layout&&"bottom"===this.align}]}}};n("e110");a.render=i;t["default"]=a},"0202":function(e,t,n){"use strict";n("b5b2")},"0596":function(e,t,n){"use strict";e.exports=n("0044")},"08bd":function(e,t,n){"use strict";var r=n("7a23");function o(e,t,n,o,i,a){var s=Object(r["resolveComponent"])("Skeleton");return e.pending?(Object(r["openBlock"])(),Object(r["createBlock"])(s,Object(r["mergeProps"])({key:0},e.$attrs),null,16)):Object(r["renderSlot"])(e.$slots,"default",{key:1})}var i=n("845d"),a=n.n(i),s={inheritAttrs:!1,components:{Skeleton:a.a},props:{pending:{type:Boolean,default:!1}}};s.render=o;t["a"]=s},"17c0":function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["withScopeId"])("data-v-e13a1f92");Object(r["pushScopeId"])("data-v-e13a1f92");var i={class:"date"};Object(r["popScopeId"])();var a=o((function(e,t,n,o,a,s){return Object(r["openBlock"])(),Object(r["createBlock"])("span",i,Object(r["toDisplayString"])(e.text),1)})),s=(n("a9e3"),{props:{value:{type:[Number,String,Date],default:null}},computed:{text:function(){if(!this.value)return"Не указана";var e=new Date(this.value);return e.toLocaleString()}}});n("3fd1");s.render=a,s.__scopeId="data-v-e13a1f92";t["a"]=s},"1de2":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=Object(r["withScopeId"])("data-v-1a420bd3");Object(r["pushScopeId"])("data-v-1a420bd3");var i={class:"user-page p-grid p-mx-0"},a={class:"p-col-12 p-md-4 p-xl-2 p-offset-0 p-xl-offset-2"},s=Object(r["createTextVNode"])(" Информация "),c=Object(r["createTextVNode"])(" E-mail: "),l=Object(r["createTextVNode"])(" Отдел: "),u={class:"user-page__center p-col-12 p-md-8 p-xl-6"},d={class:"user-page__center__content"};Object(r["popScopeId"])();var p=o((function(e,t,n,p,b,f){var m=Object(r["resolveComponent"])("SkeletonHelper"),g=Object(r["resolveComponent"])("Divider"),h=Object(r["resolveComponent"])("GroupView"),v=Object(r["resolveComponent"])("RoleView"),O=Object(r["resolveComponent"])("Card"),j=Object(r["resolveComponent"])("Menubar"),k=Object(r["resolveComponent"])("router-view"),w=Object(r["resolveComponent"])("SpinnerHelper");return Object(r["openBlock"])(),Object(r["createBlock"])("div",i,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])(O,null,{title:o((function(){return[s]})),content:o((function(){return[Object(r["createVNode"])(m,{pending:e.pending},{default:o((function(){return[Object(r["createTextVNode"])(" Логин: "+Object(r["toDisplayString"])(e.user.username),1)]})),_:1},8,["pending"]),Object(r["createVNode"])(g),Object(r["createVNode"])(m,{pending:e.pending},{default:o((function(){return[c,Object(r["createVNode"])("a",{href:"mailto:"+e.user.email},Object(r["toDisplayString"])(e.user.email),9,["href"])]})),_:1},8,["pending"]),Object(r["createVNode"])(g),Object(r["createVNode"])(m,{pending:e.pending},{default:o((function(){return[e.user.group?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:0},[l,Object(r["createVNode"])(h,{group:e.user.group},null,8,["group"])],64)):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["pending"]),e.pending||e.user.group?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(m,{pending:e.pending},{default:o((function(){return[Object(r["createVNode"])(v,{value:e.user.role},null,8,["value"])]})),_:1},8,["pending"])]})),_:1})]),Object(r["createVNode"])("div",u,[Object(r["createVNode"])(j,{model:e.toolbarItems,class:"p-mb-3"},null,8,["model"]),Object(r["createVNode"])("div",d,[Object(r["createVNode"])(w,{pending:e.pending,class:"p-mx-auto p-mt-6"},{default:o((function(){return[Object(r["createVNode"])(k,{user:e.user,isMe:e.isMe,onUpdate:e.onUpdate},{default:o((function(t){var n=t.Component;return[(Object(r["openBlock"])(),Object(r["createBlock"])(r["KeepAlive"],{max:"2"},[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(n),{key:e.$route.fullPath}))],1024))]})),_:1},8,["user","isMe","onUpdate"])]})),_:1},8,["pending"])])])])})),b=(n("a9e3"),n("3835")),f=(n("96cf"),n("1da1")),m=n("5530"),g=n("f31b"),h=n.n(g),v=n("5502"),O=n("be3b"),j=n("c24f"),k=n("a7ca"),w=n.n(k),y=n("0596"),V=n.n(y),x=n("a0cd"),S=n.n(x),N=n("3635"),C=n("08bd"),P=n("4ecd"),B=n("be88"),R={Card:w.a,Divider:V.a,Menubar:S.a,RoleView:N["a"],SkeletonHelper:C["a"],SpinnerHelper:P["a"],GroupView:B["a"]},I={name:"UserPage",components:R,props:{id:{type:Number,required:!0}},data:function(){return{user:null,pending:!0}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(v["d"])("user",{myId:"id"})),Object(v["c"])("user",["isAdmin"])),{},{isMe:function(){return this.id===this.myId},toolbarItems:function(){var e=this,t=this.id;return[{label:"Профиль",icon:"pi pi-user",to:"/user/".concat(t,"/profile")},{label:"Настройки",icon:"pi pi-cog",to:"/user/".concat(t,"/settings"),visible:function(){return e.isMe||e.isAdmin}}]}}),methods:{onUpdate:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h()(Object(j["d"])(O["a"],e.id));case 2:if(n=t.sent,r=Object(b["a"])(n,2),o=r[0],i=r[1],!o){t.next=9;break}return e.$toast.add({severity:"error",summary:o.serverError||"Ошибка обновления информации о пользователе",life:5e3}),t.abrupt("return");case 9:e.user=i,e.isMe&&e.$store.commit("user/setUser",i);case 11:case"end":return t.stop()}}),t)})))()}},beforeRouteEnter:function(e,t,n){return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,o,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.params.id,t.next=3,h()(Object(j["d"])(O["a"],r));case 3:if(o=t.sent,i=Object(b["a"])(o,2),a=i[0],s=i[1],!a){t.next=10;break}return console.error(a),t.abrupt("return",n(!1));case 10:n((function(e){e.user=s,e.pending=!1}));case 11:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(e,t,n){var r=this;return Object(f["a"])(regeneratorRuntime.mark((function o(){var i,a,s,c,l;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=e.params.id,i!==t.params.id){o.next=3;break}return o.abrupt("return",n());case 3:return r.pending=!0,o.next=6,h()(Object(j["d"])(O["a"],i));case 6:a=o.sent,s=Object(b["a"])(a,2),c=s[0],l=s[1],r.pending=!1,c?(console.error(c),n(!1)):(r.user=l,n());case 12:case"end":return o.stop()}}),o)})))()}};n("ca95");I.render=p,I.__scopeId="data-v-1a420bd3";t["default"]=I},"22b8":function(e,t,n){"use strict";n("86e4")},"22ea":function(e,t,n){},3001:function(e,t,n){},"3fd1":function(e,t,n){"use strict";n("a8f5")},"4c42":function(e,t,n){"use strict";n("955f")},"4ecd":function(e,t,n){"use strict";var r=n("7a23");function o(e,t,n,o,i,a){var s=Object(r["resolveComponent"])("Spinner");return e.pending?(Object(r["openBlock"])(),Object(r["createBlock"])(s,Object(r["mergeProps"])({key:0},e.$attrs),null,16)):Object(r["renderSlot"])(e.$slots,"default",{key:1})}var i=n("8d04"),a=n.n(i),s={inheritAttrs:!1,components:{Spinner:a.a},props:{pending:{type:Boolean,default:!1}}};s.render=o;t["a"]=s},"81d5":function(e,t,n){"use strict";var r=n("7b0b"),o=n("23cb"),i=n("50c4");e.exports=function(e){var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,l=void 0===c?n:o(c,n);while(l>s)t[s++]=e;return t}},"845d":function(e,t,n){"use strict";e.exports=n("8817")},"86e4":function(e,t,n){},8817:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,i,a){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{style:a.containerStyle,class:a.containerClass},null,6)}var i={props:{shape:{type:String,default:"rectangle"},size:{type:String,default:null},width:{type:String,default:"100%"},height:{type:String,default:"1rem"},borderRadius:{type:String,default:null},animation:{type:String,default:"wave"}},computed:{containerClass:function(){return["p-skeleton p-component",{"p-skeleton-circle":"circle"===this.shape,"p-skeleton-animation-none":"none"===this.animation}]},containerStyle:function(){return this.size?{width:this.size,height:this.size,borderRadius:this.borderRadius}:{width:this.width,height:this.height,borderRadius:this.borderRadius}}}};n("c467");i.render=o;t["default"]=i},"8d04":function(e,t,n){"use strict";e.exports=n("e638")},9501:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,i,a){var s=Object(r["resolveComponent"])("SettingsForm"),c=Object(r["resolveComponent"])("PasswordBlock"),l=Object(r["resolveComponent"])("TokensTable");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(s,{user:e.user,isMe:e.isMe,pending:e.settingsPending,onSubmit:e.onSettingsUpdate},null,8,["user","isMe","pending","onSubmit"]),Object(r["createVNode"])(c,{ref:"password",pending:e.passwordPending,class:"p-mt-3",onSubmit:e.onPasswordUpdate},null,8,["pending","onSubmit"]),Object(r["createVNode"])(l,{tokens:e.tokens,pending:e.tokensPending,class:"p-mt-3",onDelete:e.onTokenDelete},null,8,["tokens","pending","onDelete"])])}n("c975"),n("a434");var i=n("3835"),a=(n("96cf"),n("1da1")),s=n("f31b"),c=n.n(s),l=n("c24f"),u=Object(r["withScopeId"])("data-v-7fa455a4");Object(r["pushScopeId"])("data-v-7fa455a4");var d=Object(r["createTextVNode"])(" Настройки "),p={class:"settings-form__grid"},b=Object(r["createVNode"])("label",{for:"email"}," Email: ",-1),f=Object(r["createVNode"])("label",{for:"group"}," Отдел: ",-1),m=Object(r["createVNode"])("label",{for:"role"}," Роль: ",-1),g={class:"p-grid p-mt-2"},h={class:"p-col-fixed"};Object(r["popScopeId"])();var v=u((function(e,t,n,o,i,a){var s=Object(r["resolveComponent"])("InputText"),c=Object(r["resolveComponent"])("GroupPicker"),l=Object(r["resolveComponent"])("RolePicker"),v=Object(r["resolveComponent"])("Button"),O=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(O,null,{title:u((function(){return[d]})),content:u((function(){return[Object(r["createVNode"])("form",{class:"settings-form",onSubmit:t[4]||(t[4]=Object(r["withModifiers"])((function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)}),["prevent"]))},[Object(r["createVNode"])("div",p,[b,Object(r["createVNode"])("div",null,[Object(r["createVNode"])(s,{modelValue:e.userData.email,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.userData.email=t}),disabled:e.pending,id:"email",placeholder:"example@example.com",type:"text"},null,8,["modelValue","disabled"])]),f,Object(r["createVNode"])("div",null,[Object(r["createVNode"])(c,{modelValue:e.userData.groupId,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.userData.groupId=t}),disabled:e.pending,inputId:"group"},null,8,["modelValue","disabled"])]),e.showRoles?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:0},[m,Object(r["createVNode"])("div",null,[Object(r["createVNode"])(l,{modelValue:e.userData.role,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.userData.role=t}),disabled:e.pending,inputId:"role"},null,8,["modelValue","disabled"])])],64)):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("div",g,[Object(r["createVNode"])("div",h,[Object(r["createVNode"])(v,{disabled:e.pending,label:"Сохранить",icon:"pi pi-save",type:"submit"},null,8,["disabled"])])])],32)]})),_:1})})),O=n("5530"),j=n("5502"),k=n("a7ca"),w=n.n(k),y=n("a84a"),V=n.n(y),x=n("6549"),S=n.n(x),N=n("a871"),C=n("5c09"),P={Card:w.a,InputText:V.a,Button:S.a,GroupPicker:N["a"],RolePicker:C["a"]},B={components:P,props:{user:{type:Object,required:!0},isMe:{type:Boolean,default:!1},pending:{type:Boolean,default:!1}},emits:["submit"],data:function(){return{userData:null}},computed:Object(O["a"])(Object(O["a"])({},Object(j["c"])("user",["isAdmin"])),{},{userIsAdmin:function(){return 0===this.user.role},showRoles:function(){return this.isAdmin&&(this.isMe||!this.userIsAdmin)}}),watch:{user:{handler:"resetUserData",immediate:!0}},methods:{resetUserData:function(){var e=this.user,t=e.email,n=e.groupId,r=void 0===n?null:n,o=e.role,i=void 0===o?2:o;this.userData={email:t,groupId:r,role:i}},onSubmit:function(){var e=Object(O["a"])({},this.userData);this.showRoles||delete e.role,this.$emit("submit",e)}}};n("4c42");B.render=v,B.__scopeId="data-v-7fa455a4";var R=B,I=Object(r["createTextVNode"])(" Смена пароля "),T={class:"p-fluid p-formgrid p-grid"},$={class:"p-field p-col-12 p-sm-6 p-lg-4"},L=Object(r["createVNode"])("label",{for:"oldPassword"}," Старый пароль ",-1),D={class:"p-field p-col-12 p-sm-6 p-lg-4"},_=Object(r["createVNode"])("label",{for:"password"}," Новый пароль ",-1),U={class:"p-field p-col-12 p-sm-6 p-lg-4"},z=Object(r["createVNode"])("label",{for:"confirmPassword"}," Подтвердите новый пароль ",-1);function E(e,t,n,o,i,a){var s=Object(r["resolveComponent"])("Password"),c=Object(r["resolveComponent"])("SkeletonHelper"),l=Object(r["resolveComponent"])("Button"),u=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(u,null,{title:Object(r["withCtx"])((function(){return[I]})),content:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("form",{onSubmit:t[4]||(t[4]=Object(r["withModifiers"])((function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)}),["prevent"]))},[Object(r["createVNode"])("div",T,[Object(r["createVNode"])("div",$,[L,Object(r["createVNode"])(c,{pending:e.pending,style:{height:"2.25rem"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{modelValue:e.oldPassword,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.oldPassword=t}),id:"oldPassword",feedback:!1,toggleMask:""},null,8,["modelValue"])]})),_:1},8,["pending"])]),Object(r["createVNode"])("div",D,[_,Object(r["createVNode"])(c,{pending:e.pending,style:{height:"2.25rem"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),id:"password",feedback:!1,toggleMask:""},null,8,["modelValue"])]})),_:1},8,["pending"])]),Object(r["createVNode"])("div",U,[z,Object(r["createVNode"])(c,{pending:e.pending,style:{height:"2.25rem"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.confirmPassword=t}),id:"confirmPassword",feedback:!1,toggleMask:""},null,8,["modelValue"])]})),_:1},8,["pending"])])]),Object(r["createVNode"])("div",null,[Object(r["createVNode"])(l,{disabled:e.pending,label:"Подтвердить",icon:"pi pi-save",type:"submit"},null,8,["disabled"])])],32)]})),_:1})}var M=n("b51d"),A=n.n(M),F=n("08bd"),H={Card:w.a,Password:A.a,Button:S.a,SkeletonHelper:F["a"]},q=10,G={name:"ChangePasswordBlock",components:H,props:{pending:{type:Boolean,default:!1}},emits:["submit"],data:function(){return{oldPassword:"",password:"",confirmPassword:""}},computed:{isPasswordEquals:function(){return this.password===this.confirmPassword},isFormValid:function(){return this.isPasswordEquals&&this.password.length>=q&&this.oldPassword}},methods:{clear:function(){this.oldPassword="",this.password="",this.confirmPassword=""},onSubmit:function(){if(!this.isFormValid){var e="Ошибка в введенных данных";return this.oldPassword?this.password?this.isPasswordEquals?this.password.length<q&&(e="Минимальная длина пароля ".concat(q," символов")):e="Новый пароль не совпадает с подтверждением":e="Введите новый пароль":e="Введите старый пароль",void this.$toast.add({severity:"error",summary:e,life:5e3})}var t=this.password,n=this.oldPassword;this.$emit("submit",{password:t,oldPassword:n})}}};G.render=E;var K=G,W=Object(r["createVNode"])("div",{class:"p-text-center"}," Токены не найдены ",-1);function Z(e,t,n,o,i,a){var s=Object(r["resolveComponent"])("Column"),c=Object(r["resolveComponent"])("DateView"),l=Object(r["resolveComponent"])("DataTable");return Object(r["openBlock"])(),Object(r["createBlock"])(l,{title:"Список токенов доступа",items:e.tokens,pending:e.pending,paginator:!1,class:"tokens-table"},{empty:Object(r["withCtx"])((function(){return[W]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{field:"id",header:"#",headerClass:"p-text-center",bodyClass:"p-text-center"}),Object(r["createVNode"])(s,{field:"userAgent",header:"UserAgent",bodyClass:"tokens-table__user-agent"}),Object(r["createVNode"])(s,{field:"ip",header:"Ip-адрес"}),Object(r["createVNode"])(s,{field:"createdAt",header:"Дата"},{body:Object(r["withCtx"])((function(e){var t=e.data;return[Object(r["createVNode"])(c,{value:t.createdAt},null,8,["value"])]})),_:1}),Object(r["createVNode"])(s,{field:"actions",header:"#"},{body:Object(r["withCtx"])((function(t){var n=t.data;return[Object(r["createVNode"])("i",{class:"pi pi-trash",onClick:Object(r["withModifiers"])((function(t){return e.onDelete(n)}),["stop"])},null,8,["onClick"])]})),_:1})]})),_:1},8,["items","pending"])}var J=n("c524"),Q=n.n(J),X=n("0dd2"),Y=n("17c0"),ee={components:{Column:Q.a,DataTable:X["a"],DateView:Y["a"]},props:{tokens:{type:Array,default:function(){return[]}},pending:{type:Boolean,default:!1}},emits:["delete"],methods:{onDelete:function(e){this.$emit("delete",e)}}};n("0202");ee.render=Z;var te=ee,ne={components:{SettingsForm:R,PasswordBlock:K,TokensTable:te},props:{user:{type:Object,required:!0},isMe:{type:Boolean,required:!0}},emits:["update"],data:function(){return{tokens:[],tokensPending:!0,settingsPending:!1,passwordPending:!1}},methods:{loadTokens:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.isMe?l["c"]:l["e"],e.tokensPending=!0,t.next=4,c()(n(e.$axios,e.user.id));case 4:if(r=t.sent,o=Object(i["a"])(r,2),a=o[0],s=o[1],u=void 0===s?[]:s,!a){t.next=13;break}return e.$toast.add({severity:"error",summary:a.serverError||"Ошибка загрузки токенов",life:5e3}),e.tokensPending=!1,t.abrupt("return");case 13:e.tokens=u,e.tokensPending=!1;case 15:case"end":return t.stop()}}),t)})))()},onTokenDelete:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,a,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.id,t.tokensPending=!0,n.next=4,c()(Object(l["h"])(t.$axios,r));case 4:if(o=n.sent,a=Object(i["a"])(o,1),s=a[0],!s){n.next=11;break}return t.$toast.add({severity:"error",summary:s.serverError||"Ошибка при удалении токена",life:5e3}),t.tokensPending=!1,n.abrupt("return");case 11:u=t.tokens.indexOf(e),~u&&t.tokens.splice(u,1),t.$toast.add({severity:"success",summary:"Токен успешно удалён",life:5e3}),t.tokensPending=!1;case 15:case"end":return n.stop()}}),n)})))()},onSettingsUpdate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.user.id,t.settingsPending=!0,n.next=4,c()(Object(l["m"])(t.$axios,r,e));case 4:if(o=n.sent,a=Object(i["a"])(o,1),s=a[0],!s){n.next=11;break}return t.$toast.add({severity:"error",summary:s.serverError||"Ошибка при изменении настроек",life:5e3}),t.settingsPending=!1,n.abrupt("return");case 11:t.$toast.add({severity:"success",summary:"Настройки успешно изменены",life:5e3}),t.$emit("update"),t.settingsPending=!1;case 14:case"end":return n.stop()}}),n)})))()},onPasswordUpdate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,a,s,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.password,o=e.oldPassword,a=t.user.id,t.passwordPending=!0,n.next=5,c()(Object(l["a"])(t.$axios,a,r,o));case 5:if(s=n.sent,u=Object(i["a"])(s,1),d=u[0],!d){n.next=12;break}return t.$toast.add({severity:"error",summary:d.serverError||"Ошибка при изменении пароля",life:5e3}),t.passwordPending=!1,n.abrupt("return");case 12:t.$toast.add({severity:"success",summary:"Пароль успешно изменен",life:5e3}),t.passwordPending=!1,t.$refs.password.clear();case 15:case"end":return n.stop()}}),n)})))()}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadTokens();case 2:case"end":return t.stop()}}),t)})))()}};ne.render=o;t["default"]=ne},"955f":function(e,t,n){},a8f5:function(e,t,n){},ae0b:function(e,t,n){},b51d:function(e,t,n){"use strict";e.exports=n("ec22")},b5b2:function(e,t,n){},c467:function(e,t,n){"use strict";n("ae0b")},ca95:function(e,t,n){"use strict";n("3001")},cb29:function(e,t,n){var r=n("23e7"),o=n("81d5"),i=n("44d2");r({target:"Array",proto:!0},{fill:o}),i("fill")},e110:function(e,t,n){"use strict";n("22ea")},e638:function(e,t,n){"use strict";n.r(t);n("cb29");var r=n("7a23"),o={class:"p-progress-spinner",role:"alert","aria-busy":"true"};function i(e,t,n,i,a,s){return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[(Object(r["openBlock"])(),Object(r["createBlock"])("svg",{class:"p-progress-spinner-svg",viewBox:"25 25 50 50",style:s.svgStyle},[Object(r["createVNode"])("circle",{class:"p-progress-spinner-circle",cx:"50",cy:"50",r:"20",fill:n.fill,"stroke-width":n.strokeWidth,strokeMiterlimit:"10"},null,8,["fill","stroke-width"])],4))])}var a={props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},computed:{svgStyle:function(){return{"animation-duration":this.animationDuration}}}};n("22b8");a.render=i;t["default"]=a},ec22:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"p-password-info"};function i(e,t,n,i,a,s){return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])("input",Object(r["mergeProps"])({ref:"input",type:"password",class:["p-inputtext p-component",{"p-filled":s.filled}],value:n.modelValue,onInput:t[1]||(t[1]=function(){return s.onInput&&s.onInput.apply(s,arguments)}),onFocus:t[2]||(t[2]=function(){return s.onFocus&&s.onFocus.apply(s,arguments)}),onBlur:t[3]||(t[3]=function(){return s.onBlur&&s.onBlur.apply(s,arguments)}),onKeyup:t[4]||(t[4]=function(){return s.onKeyUp&&s.onKeyUp.apply(s,arguments)})},e.$attrs),null,16,["value"]),Object(r["createVNode"])(r["Transition"],{name:"p-connected-overlay",onEnter:s.onOverlayEnter,onLeave:s.onOverlayLeave},{default:Object(r["withCtx"])((function(){return[a.overlayVisible?(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:0,ref:s.overlayRef,class:"p-password-panel p-component"},[Object(r["createVNode"])("div",{class:"p-password-meter",style:{"background-position":a.meterPosition}},null,4),Object(r["createVNode"])("div",o,Object(r["toDisplayString"])(a.infoText),1)],512)):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["onEnter","onLeave"])],64)}n("d3b7"),n("4d63"),n("ac1f"),n("25f0");var a=n("e895"),s=n.n(a),c=n("3a94"),l=n.n(c),u={emits:["update:modelValue"],inheritAttrs:!1,props:{modelValue:String,promptLabel:{type:String,default:null},mediumRegex:{type:String,default:"^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})"},strongRegex:{type:String,default:"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})"},weakLabel:{type:String,default:null},mediumLabel:{type:String,default:null},strongLabel:{type:String,default:null},feedback:{type:Boolean,default:!0}},data:function(){return{overlayVisible:!1,meterPosition:"",infoText:this.promptLabel}},mediumCheckRegExp:null,strongCheckRegExp:null,resizeListener:null,scrollHandler:null,overlay:null,mounted:function(){this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex)},beforeUnmount:function(){this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)},methods:{onOverlayEnter:function(){this.overlay.style.zIndex=String(l.a.generateZIndex()),this.overlay.style.minWidth=l.a.getOuterWidth(this.$refs.input)+"px",l.a.absolutePosition(this.overlay,this.$refs.input),this.bindScrollListener(),this.bindResizeListener()},onOverlayLeave:function(){this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null},testStrength:function(e){var t=0;return this.strongCheckRegExp.test(e)?t=3:this.mediumCheckRegExp.test(e)?t=2:e.length&&(t=1),t},onInput:function(e){this.$emit("update:modelValue",e.target.value)},onFocus:function(){this.feedback&&(this.overlayVisible=!0)},onBlur:function(){this.feedback&&(this.overlayVisible=!1)},onKeyUp:function(e){if(this.feedback){var t=e.target.value,n=null,r=null;switch(this.testStrength(t)){case 1:n=this.weakText,r="0px -10px";break;case 2:n=this.mediumText,r="0px -20px";break;case 3:n=this.strongText,r="0px -30px";break;default:n=this.promptText,r="0px 0px";break}this.meterPosition=r,this.infoText=n,this.overlayVisible||(this.overlayVisible=!0)}},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new s.a(this.$refs.input,(function(){e.overlayVisible&&(e.overlayVisible=!1)}))),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},overlayRef:function(e){this.overlay=e}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0},weakText:function(){return this.weakLabel||this.$primevue.config.locale.weak},mediumText:function(){return this.mediumLabel||this.$primevue.config.locale.medium},strongText:function(){return this.strongLabel||this.$primevue.config.locale.strong},promptText:function(){return this.promptLabel||this.$primevue.config.locale.passwordPrompt}}};u.render=i;t["default"]=u},ed22:function(e,t,n){"use strict";n.r(t);n("4de4");var r=n("7a23"),o={class:"profile"};function i(e,t,n,i,a,s){var c=Object(r["resolveComponent"])("TaskFilter"),l=Object(r["resolveComponent"])("TaskTable");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(c,{pending:e.pending,title:e.filter.title,"onUpdate:title":t[1]||(t[1]=function(t){return e.filter.title=t}),status:e.filter.status,"onUpdate:status":t[2]||(t[2]=function(t){return e.filter.status=t}),groupId:e.filter.groupId,"onUpdate:groupId":t[3]||(t[3]=function(t){return e.filter.groupId=t}),hideGroup:e.hasGroup,hideUser:"",onSubmit:e.onFilter},null,8,["pending","title","status","groupId","hideGroup","onSubmit"]),Object(r["createVNode"])(l,{title:e.tableTitle,tasks:e.tasks,pending:e.pending,page:e.meta&&e.meta.page,perPage:e.meta&&e.meta.perPage,totalCount:e.meta&&e.meta.totalCount,class:"p-mt-3",onPage:e.onChangePage},null,8,["title","tasks","pending","page","perPage","totalCount","onPage"])])}var a=n("3835"),s=n("5530"),c=(n("96cf"),n("1da1")),l=n("f31b"),u=n.n(l),d=n("6925"),p=n("ca0e"),b=n("b199"),f={components:{TaskFilter:d["a"],TaskTable:p["a"]},props:{user:{type:Object,required:!0},isMe:{type:Boolean,required:!0}},data:function(){return{pending:!0,tasks:[],meta:null,filter:{title:"",status:null,userId:null,groupId:null}}},computed:{tableTitle:function(){return this.isMe?"Мои задачи":"Задачи"},hasGroup:function(){return null!==this.user.groupId}},watch:{user:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.id,o=e.groupId,t.filter.userId=r,o&&(t.filter.groupId=o),n.next=5,t.loadTasks();case 5:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onFilter:function(){this.loadTasks()},onChangePage:function(e){this.loadTasks(e.page+1,e.rows)},loadTasks:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,o,i,c,l,d,p,f,m,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,o=e.length>1&&void 0!==e[1]?e[1]:20,i=Object(s["a"])(Object(s["a"])({},t.filter),{},{page:r,perPage:o}),t.pending=!0,n.next=6,u()(Object(b["e"])(t.$axios,i));case 6:if(c=n.sent,l=Object(a["a"])(c,2),d=l[0],p=l[1],p=void 0===p?{}:p,f=p.items,m=p.meta,g=void 0===m?null:m,!d){n.next=16;break}return t.$toast.add({severity:"error",summary:d.serverError||"Ошибка загрузки задач",life:5e3}),t.pending=!1,n.abrupt("return");case 16:t.tasks=f,t.meta=g,t.pending=!1;case 19:case"end":return n.stop()}}),n)})))()}}};f.render=i;t["default"]=f}}]);
//# sourceMappingURL=profile.03b47a7a.js.map