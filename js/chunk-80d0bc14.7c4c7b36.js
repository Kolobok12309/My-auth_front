(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80d0bc14"],{"00fd":function(e,t,n){var r=n("9e69"),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,c=r?r.toStringTag:void 0;function u(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(u){}var o=i.call(e);return r&&(t?e[c]=n:delete e[c]),o}e.exports=u},"0202":function(e,t,n){"use strict";n("b5b2")},"0f32":function(e,t,n){var r=n("b047"),o=n("1a8c"),a="Expected a function";function i(e,t,n){var i=!0,c=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(i="leading"in n?!!n.leading:i,c="trailing"in n?!!n.trailing:c),r(e,t,{leading:i,maxWait:t,trailing:c})}e.exports=i},1310:function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},"1a8c":function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},"23ba":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var r=function(e){var t=e.$get,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t("/group",{params:n})},o=function(e){var t=e.$get,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t("/group/search",{params:{text:n}})},a=function(e,t){var n=e.$get;return n("/group/".concat(t))}},"29f3":function(e,t){var n=Object.prototype,r=n.toString;function o(e){return r.call(e)}e.exports=o},"2b3e":function(e,t,n){var r=n("585a"),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},"2b67":function(e,t,n){},3049:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,a,i){return Object(r["openBlock"])(),Object(r["createBlock"])("input",{class:["p-inputtext p-component",{"p-filled":i.filled}],value:n.modelValue,onInput:t[1]||(t[1]=function(){return i.onInput&&i.onInput.apply(i,arguments)})},null,42,["value"])}n("d3b7"),n("25f0");var a={emits:["update:modelValue"],props:{modelValue:null},methods:{onInput:function(e){this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0}}};a.render=o;t["default"]=a},3729:function(e,t,n){var r=n("9e69"),o=n("00fd"),a=n("29f3"),i="[object Null]",c="[object Undefined]",u=r?r.toStringTag:void 0;function s(e){return null==e?void 0===e?c:i:u&&u in Object(e)?o(e):a(e)}e.exports=s},"404c":function(e,t,n){"use strict";e.exports=n("6361")},"408c":function(e,t,n){var r=n("2b3e"),o=function(){return r.Date.now()};e.exports=o},"421e":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"p-button-label"};function a(e,t,n,a,i,c){var u=Object(r["resolveDirective"])("ripple");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])("button",{class:c.buttonClass,type:"button"},[Object(r["renderSlot"])(e.$slots,"default",{},(function(){return[n.icon?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:0,class:c.iconClass},null,2)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("span",o,Object(r["toDisplayString"])(n.label||" "),1),n.badge?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:1,class:c.badgeStyleClass},Object(r["toDisplayString"])(n.badge),3)):Object(r["createCommentVNode"])("",!0)]}))],2)),[[u]])}var i=n("c840"),c=n.n(i),u={props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null}},computed:{buttonClass:function(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":("top"===this.iconPos||"bottom"===this.iconPos)&&this.label,"p-disabled":this.$attrs.disabled}},iconClass:function(){return[this.icon,"p-button-icon",{"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label,"p-button-icon-top":"top"===this.iconPos&&this.label,"p-button-icon-bottom":"bottom"===this.iconPos&&this.label}]},badgeStyleClass:function(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&1===String(this.badge).length}]}},directives:{ripple:c.a}};u.render=a;t["default"]=u},"45fc":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").some,a=n("a640"),i=n("ae40"),c=a("some"),u=i("some");r({target:"Array",proto:!0,forced:!c||!u},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"585a":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("c8ba"))},6549:function(e,t,n){"use strict";e.exports=n("421e")},"883f":function(e,t,n){"use strict";n("2b67")},"924f":function(e,t,n){},9501:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,a,i){var c=Object(r["resolveComponent"])("SettingsForm"),u=Object(r["resolveComponent"])("TokensTable");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(c,{user:e.user,isMe:e.isMe,pending:e.settingsPending,onSubmit:e.onSettingsUpdate},null,8,["user","isMe","pending","onSubmit"]),Object(r["createVNode"])(u,{tokens:e.tokens,pending:e.tokensPending,class:"p-mt-3",onDelete:e.onTokenDelete},null,8,["tokens","pending","onDelete"])])}n("c975"),n("a434");var a=n("3835"),i=(n("96cf"),n("1da1")),c=n("f31b"),u=n.n(c),s=n("c24f"),l=Object(r["withScopeId"])("data-v-533fab13");Object(r["pushScopeId"])("data-v-533fab13");var d=Object(r["createTextVNode"])(" Настройки "),p={class:"settings-form__grid"},b=Object(r["createVNode"])("label",{for:"email"}," Email: ",-1),f=Object(r["createVNode"])("label",{for:"group"}," Отдел: ",-1),m=Object(r["createVNode"])("label",{for:"role"}," Роль: ",-1),v={class:"p-grid p-mt-2"},g={class:"p-col-fixed"};Object(r["popScopeId"])();var h=l((function(e,t,n,o,a,i){var c=Object(r["resolveComponent"])("InputText"),u=Object(r["resolveComponent"])("GroupPicker"),s=Object(r["resolveComponent"])("Dropdown"),h=Object(r["resolveComponent"])("Button"),j=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(j,null,{title:l((function(){return[d]})),content:l((function(){return[Object(r["createVNode"])("form",{class:"settings-form",onSubmit:t[4]||(t[4]=Object(r["withModifiers"])((function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)}),["prevent"]))},[Object(r["createVNode"])("div",p,[b,Object(r["createVNode"])("div",null,[Object(r["createVNode"])(c,{modelValue:e.userData.email,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.userData.email=t}),disabled:e.pending,id:"email",placeholder:"example@example.com",type:"text"},null,8,["modelValue","disabled"])]),f,Object(r["createVNode"])("div",null,[Object(r["createVNode"])(u,{modelValue:e.userData.groupId,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.userData.groupId=t}),disabled:e.pending,inputId:"group"},null,8,["modelValue","disabled"])]),e.showRoles?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:0},[m,Object(r["createVNode"])("div",null,[Object(r["createVNode"])(s,{modelValue:e.userData.role,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.userData.role=t}),options:e.roles,disabled:e.pending,placeholder:"Роль",optionLabel:"label",optionValue:"id",dataKey:"id",inputId:"role"},null,8,["modelValue","options","disabled"])])],64)):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("div",v,[Object(r["createVNode"])("div",g,[Object(r["createVNode"])(h,{disabled:e.pending,label:"Сохранить",icon:"pi pi-save",type:"submit"},null,8,["disabled"])])])],32)]})),_:1})})),j=n("5530"),O=n("5502"),k=n("a7ca"),y=n.n(k),x=n("a84a"),V=n.n(x),w=n("404c"),C=n.n(w),N=n("6549"),S=n.n(N),D=n("a871"),B=[{id:0,label:"Админ"},{id:1,label:"Директор"},{id:2,label:"Пользователь"}],P={components:{Card:y.a,InputText:V.a,GroupPicker:D["a"],Dropdown:C.a,Button:S.a},props:{user:{type:Object,required:!0},isMe:{type:Boolean,default:!1},pending:{type:Boolean,default:!1}},emits:["submit"],data:function(){return{userData:null}},computed:Object(j["a"])(Object(j["a"])({},Object(O["c"])("user",["isAdmin"])),{},{roles:function(){return B},userIsAdmin:function(){return 0===this.user.role},showRoles:function(){return this.isAdmin&&(this.isMe||!this.userIsAdmin)}}),watch:{user:{handler:"resetUserData",immediate:!0}},methods:{resetUserData:function(){var e=this.user,t=e.email,n=e.groupId,r=void 0===n?null:n,o=e.role,a=void 0===o?2:o;this.userData={email:t,groupId:r,role:a}},onSubmit:function(){var e=Object(j["a"])({},this.userData);this.showRoles||delete e.role,this.$emit("submit",e)}}};n("fbde");P.render=h,P.__scopeId="data-v-533fab13";var $=P,T=Object(r["createVNode"])("div",{class:"p-text-center"}," Токены не найдены ",-1);function I(e,t,n,o,a,i){var c=Object(r["resolveComponent"])("Column"),u=Object(r["resolveComponent"])("DataTable");return Object(r["openBlock"])(),Object(r["createBlock"])(u,{title:"Список токенов доступа",items:e.tokens,pending:e.pending,paginator:!1,class:"tokens-table"},{empty:Object(r["withCtx"])((function(){return[T]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{field:"id",header:"#",headerClass:"p-text-center",bodyClass:"p-text-center"}),Object(r["createVNode"])(c,{field:"userAgent",header:"UserAgent",bodyClass:"tokens-table__user-agent"}),Object(r["createVNode"])(c,{field:"ip",header:"Ip-адрес"}),Object(r["createVNode"])(c,{field:"createdAt",header:"Дата"}),Object(r["createVNode"])(c,{field:"actions",header:"#"},{body:Object(r["withCtx"])((function(t){var n=t.data;return[Object(r["createVNode"])("i",{class:"pi pi-trash",onClick:Object(r["withModifiers"])((function(t){return e.onDelete(n)}),["stop"])},null,8,["onClick"])]})),_:1})]})),_:1},8,["items","pending"])}var R=n("c524"),M=n.n(R),_=n("0dd2"),U={components:{Column:M.a,DataTable:_["a"]},props:{tokens:{type:Array,default:function(){return[]}},pending:{type:Boolean,default:!1}},emits:["delete"],methods:{onDelete:function(e){this.$emit("delete",e)}}};n("0202");U.render=I;var A=U,E={components:{SettingsForm:$,TokensTable:A},props:{user:{type:Object,required:!0},isMe:{type:Boolean,required:!0}},emits:["update"],data:function(){return{tokens:[],tokensPending:!0,settingsPending:!1}},methods:{loadTokens:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.isMe?s["b"]:s["d"],e.tokensPending=!0,t.next=4,u()(n(e.$axios,e.user.id));case 4:if(r=t.sent,o=Object(a["a"])(r,2),i=o[0],c=o[1],l=void 0===c?[]:c,!i){t.next=13;break}return e.$toast.add({severity:"error",summary:i.serverError||"Ошибка загрузки токенов",life:5e3}),e.tokensPending=!1,t.abrupt("return");case 13:e.tokens=l,e.tokensPending=!1;case 15:case"end":return t.stop()}}),t)})))()},onTokenDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,i,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.id,t.tokensPending=!0,n.next=4,u()(Object(s["e"])(t.$axios,r));case 4:if(o=n.sent,i=Object(a["a"])(o,1),c=i[0],!c){n.next=11;break}return t.$toast.add({severity:"error",summary:c.serverError||"Ошибка при удалении токена",life:5e3}),t.tokensPending=!1,n.abrupt("return");case 11:l=t.tokens.indexOf(e),~l&&t.tokens.splice(l,1),t.$toast.add({severity:"success",summary:"Токен успешно удалён",life:5e3}),t.tokensPending=!1;case 15:case"end":return n.stop()}}),n)})))()},onSettingsUpdate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.user.id,t.settingsPending=!0,n.next=4,u()(Object(s["j"])(t.$axios,r,e));case 4:if(o=n.sent,i=Object(a["a"])(o,1),c=i[0],!c){n.next=11;break}return t.$toast.add({severity:"error",summary:c.serverError||"Ошибка при изменении настроек",life:5e3}),t.settingsPending=!1,n.abrupt("return");case 11:t.$toast.add({severity:"success",summary:"Настройки успешно изменены",life:5e3}),t.$emit("update"),t.settingsPending=!1;case 14:case"end":return n.stop()}}),n)})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadTokens();case 2:case"end":return t.stop()}}),t)})))()}};E.render=o;t["default"]=E},"9e69":function(e,t,n){var r=n("2b3e"),o=r.Symbol;e.exports=o},a84a:function(e,t,n){"use strict";e.exports=n("3049")},a871:function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["withScopeId"])("data-v-38fbb927"),a=o((function(e,t,n,o,a,i){var c=Object(r["resolveComponent"])("Dropdown");return Object(r["openBlock"])(),Object(r["createBlock"])(c,{modelValue:e.compValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.compValue=t}),class:"group-picker",optionLabel:"name",optionValue:"id",dataKey:"id",placeholder:"Отдел",filterPlaceholder:"Поиск",emptyFilterMessage:"Отделы не найдены",filter:"",showClear:"",options:e.groups,onFilter:e.searchGroups},null,8,["modelValue","options","onFilter"])})),i=(n("45fc"),n("b0c0"),n("a9e3"),n("96cf"),n("1da1")),c=n("404c"),u=n.n(c),s=n("0f32"),l=n.n(s),d=n("23ba"),p={components:{Dropdown:u.a},props:{modelValue:{type:Number,default:null}},emits:["update:modelValue"],data:function(){return{groups:[]}},computed:{compValue:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e)}}},methods:{searchGroups:l()(Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.value,r=void 0===n?"":n,e.prev=1,e.next=4,Object(d["c"])(this.$axios,r);case 4:this.groups=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])}))),300)},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.searchGroups();case 2:if(!e.compValue){t.next=16;break}if(n=e.groups.some((function(t){var n=t.id;return n===e.compValue})),n){t.next=16;break}return t.prev=5,t.next=8,Object(d["a"])(e.$axios,e.compValue);case 8:r=t.sent,o=r.id,a=r.name,e.groups.unshift({id:o,name:a}),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](5);case 16:case"end":return t.stop()}}),t,null,[[5,14]])})))()}};n("883f");p.render=a,p.__scopeId="data-v-38fbb927";t["a"]=p},b047:function(e,t,n){var r=n("1a8c"),o=n("408c"),a=n("b4b0"),i="Expected a function",c=Math.max,u=Math.min;function s(e,t,n){var s,l,d,p,b,f,m=0,v=!1,g=!1,h=!0;if("function"!=typeof e)throw new TypeError(i);function j(t){var n=s,r=l;return s=l=void 0,m=t,p=e.apply(r,n),p}function O(e){return m=e,b=setTimeout(x,t),v?j(e):p}function k(e){var n=e-f,r=e-m,o=t-n;return g?u(o,d-r):o}function y(e){var n=e-f,r=e-m;return void 0===f||n>=t||n<0||g&&r>=d}function x(){var e=o();if(y(e))return V(e);b=setTimeout(x,k(e))}function V(e){return b=void 0,h&&s?j(e):(s=l=void 0,p)}function w(){void 0!==b&&clearTimeout(b),m=0,s=f=l=b=void 0}function C(){return void 0===b?p:V(o())}function N(){var e=o(),n=y(e);if(s=arguments,l=this,f=e,n){if(void 0===b)return O(f);if(g)return clearTimeout(b),b=setTimeout(x,t),j(f)}return void 0===b&&(b=setTimeout(x,t)),p}return t=a(t)||0,r(n)&&(v=!!n.leading,g="maxWait"in n,d=g?c(a(n.maxWait)||0,t):d,h="trailing"in n?!!n.trailing:h),N.cancel=w,N.flush=C,N}e.exports=s},b4b0:function(e,t,n){var r=n("1a8c"),o=n("ffd6"),a=NaN,i=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function d(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=u.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):c.test(e)?a:+e}e.exports=d},b5b2:function(e,t,n){},fbde:function(e,t,n){"use strict";n("924f")},ffd6:function(e,t,n){var r=n("3729"),o=n("1310"),a="[object Symbol]";function i(e){return"symbol"==typeof e||o(e)&&r(e)==a}e.exports=i}}]);
//# sourceMappingURL=chunk-80d0bc14.7c4c7b36.js.map