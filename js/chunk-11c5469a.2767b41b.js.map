{"version":3,"sources":["webpack:///./src/pages/user/settings/tokens-table/index.styl?afdc","webpack:///./src/pages/user/settings/index.vue","webpack:///./src/pages/user/settings/tokens-table/index.vue","webpack:///./src/pages/user/settings/tokens-table/index.js","webpack:///./src/pages/user/settings/tokens-table/index.vue?3f5b","webpack:///./src/pages/user/settings/index.js","webpack:///./src/pages/user/settings/index.vue?abe2"],"names":["tokens","pending","tokensPending","onTokenDelete","title","items","paginator","class","empty","field","header","headerClass","bodyClass","body","data","onDelete","components","Column","DataTable","props","type","Array","default","Boolean","emits","methods","token","this","$emit","render","Card","TokensTable","user","Object","required","isMe","settingsPending","computed","loadTokens","method","getTokens","getUserTokens","flatry","$axios","id","err","$toast","add","severity","summary","serverError","life","mounted"],"mappings":"kHAAA,W,oKCCE,yBAMM,YALJ,yBAIE,GAHCA,OAAQ,EAAAA,OACRC,QAAS,EAAAC,cACT,SAAQ,EAAAC,e,uKCGM,uB,mJAPnB,yBA6CY,GA5CVC,MAAM,yBACLC,MAAO,EAAAL,OACPC,QAAS,EAAAA,QACTK,WAAW,EACZC,MAAM,gB,CAEKC,MAAK,sBAAC,iBAEjB,C,oCAEA,iBAKE,CALF,yBAKE,GAJAC,MAAM,KACNC,OAAO,IACPC,YAAY,gBACZC,UAAU,kBAGZ,yBAIE,GAHAH,MAAM,YACNC,OAAO,YACPE,UAAU,6BAGZ,yBAGE,GAFAH,MAAM,KACNC,OAAO,aAGT,yBAGE,GAFAD,MAAM,YACNC,OAAO,SAGT,yBAUS,GATPD,MAAM,UACNC,OAAO,K,CAEIG,KAAI,sBACb,gBADiBC,EACjB,EADiBA,KACjB,MADqB,CACrB,yBAGE,KAFAP,MAAM,cACL,QAAK,+CAAO,EAAAQ,SAASD,KAAI,W,mGCtCrB,GACbE,WAAY,CACVC,WACAC,kBAGFC,MAAO,CACLnB,OAAQ,CACNoB,KAAMC,MACNC,QAAS,iBAAM,KAGjBrB,QAAS,CACPmB,KAAMG,QACND,SAAS,IAIbE,MAAO,CAAC,UAERC,QAAS,CACPV,SADO,SACEW,GACPC,KAAKC,MAAM,SAAUF,M,UCrB3B,EAAOG,OAAS,EAED,QCAA,GACbb,WAAY,CACVc,SACAC,eAGFZ,MAAO,CACLa,KAAM,CACJZ,KAAMa,OACNC,UAAU,GAGZC,KAAM,CACJf,KAAMG,QACNW,UAAU,IAIdpB,KAlBa,WAmBX,MAAO,CACLd,OAAQ,GACRE,eAAe,EAEfkC,iBAAiB,IAIrBC,SAAU,GAIVZ,QAAS,CACDa,WADC,WACY,+KACXC,EAAS,EAAKJ,KAAOK,OAAYC,OAEvC,EAAKvC,eAAgB,EAHJ,SAIgBwC,IAAOH,EAAO,EAAKI,OAAQ,EAAKX,KAAKY,KAJrD,yCAIVC,EAJU,YAIL7C,OAJK,MAII,GAJJ,GAMb6C,EANa,wBAOf,EAAKC,OAAOC,IAAI,CACdC,SAAU,QACVC,QAASJ,EAAIK,aAAe,0BAC5BC,KAAM,MAER,EAAKjD,eAAgB,EAZN,2BAgBjB,EAAKF,OAASA,EACd,EAAKE,eAAgB,EAjBJ,+CAoBbC,cArBC,SAqBauB,GAAO,6IACVA,EAAPkB,GADiB,+CAKvBQ,QAzDO,WAyDG,wKACR,EAAKd,aADG,+CC7DlB,EAAOT,OAASA,EAED,gB","file":"js/chunk-11c5469a.2767b41b.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./index.styl?vue&type=style&index=0&lang=stylus\"","<template>\n  <div>\n    <TokensTable\n      :tokens=\"tokens\"\n      :pending=\"tokensPending\"\n      @delete=\"onTokenDelete\"\n    />\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>\n","<template>\n  <DataTable\n    title=\"Список токенов доступа\"\n    :items=\"tokens\"\n    :pending=\"pending\"\n    :paginator=\"false\"\n    class=\"tokens-table\"\n  >\n    <template #empty>\n      Токены не найдены\n    </template>\n\n    <Column\n      field=\"id\"\n      header=\"#\"\n      headerClass=\"p-text-center\"\n      bodyClass=\"p-text-center\"\n    />\n\n    <Column\n      field=\"userAgent\"\n      header=\"UserAgent\"\n      bodyClass=\"tokens-table__user-agent\"\n    />\n\n    <Column\n      field=\"ip\"\n      header=\"Ip-адрес\"\n    />\n\n    <Column\n      field=\"createdAt\"\n      header=\"Дата\"\n    />\n\n    <Column\n      field=\"actions\"\n      header=\"#\"\n    >\n      <template #body=\"{ data }\">\n        <i\n          class=\"pi pi-trash\"\n          @click.stop=\"onDelete(data)\"\n        />\n      </template>\n    </Column>\n  </DataTable>\n</template>\n\n<script src=\"./index.js\"></script>\n\n<style\n  src=\"./index.styl\"\n  lang=\"stylus\"\n></style>\n","import Column from 'primevue/column';\n\nimport DataTable from '@/components/table';\n\nexport default {\n  components: {\n    Column,\n    DataTable,\n  },\n\n  props: {\n    tokens: {\n      type: Array,\n      default: () => [],\n    },\n\n    pending: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: ['delete'],\n\n  methods: {\n    onDelete(token) {\n      this.$emit('delete', token);\n    },\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=c60c9b8c\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport \"./index.styl?vue&type=style&index=0&lang=stylus\"\nscript.render = render\n\nexport default script","import flatry from 'flatry';\nimport Card from 'primevue/card';\n\nimport { getUserTokens, getTokens } from '@/api/user';\n\nimport TokensTable from './tokens-table';\n\nexport default {\n  components: {\n    Card,\n    TokensTable,\n  },\n\n  props: {\n    user: {\n      type: Object,\n      required: true,\n    },\n\n    isMe: {\n      type: Boolean,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      tokens: [],\n      tokensPending: true,\n\n      settingsPending: false,\n    };\n  },\n\n  computed: {\n\n  },\n\n  methods: {\n    async loadTokens() {\n      const method = this.isMe ? getTokens : getUserTokens;\n\n      this.tokensPending = true;\n      const [err, tokens = []] = await flatry(method(this.$axios, this.user.id));\n\n      if (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: err.serverError || 'Ошибка загрузки токенов',\n          life: 5000,\n        });\n        this.tokensPending = false;\n        return;\n      }\n\n      this.tokens = tokens;\n      this.tokensPending = false;\n    },\n\n    async onTokenDelete(token) {\n      const { id } = token;\n    },\n  },\n\n  async mounted() {\n    await this.loadTokens();\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=1b679f02\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}