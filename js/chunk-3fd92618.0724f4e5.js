(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fd92618"],{"00fd":function(e,t,n){var r=n("9e69"),o=Object.prototype,a=o.hasOwnProperty,c=o.toString,i=r?r.toStringTag:void 0;function u(e){var t=a.call(e,i),n=e[i];try{e[i]=void 0;var r=!0}catch(u){}var o=c.call(e);return r&&(t?e[i]=n:delete e[i]),o}e.exports=u},"0f32":function(e,t,n){var r=n("b047"),o=n("1a8c"),a="Expected a function";function c(e,t,n){var c=!0,i=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(c="leading"in n?!!n.leading:c,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:c,maxWait:t,trailing:i})}e.exports=c},1310:function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},"13d5":function(e,t,n){"use strict";var r=n("23e7"),o=n("d58f").left,a=n("a640"),c=n("ae40"),i=n("2d00"),u=n("605d"),s=a("reduce"),l=c("reduce",{1:0}),p=!u&&i>79&&i<83;r({target:"Array",proto:!0,forced:!s||!l||p},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1a8c":function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},"23ba":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e){var t=e.$get,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t("/group",{params:n})},o=function(e){var t=e.$get,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t("/group/search",{params:{text:n}})}},"29f3":function(e,t){var n=Object.prototype,r=n.toString;function o(e){return r.call(e)}e.exports=o},"2b3e":function(e,t,n){var r=n("585a"),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},3049:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,a,c){return Object(r["openBlock"])(),Object(r["createBlock"])("input",{class:["p-inputtext p-component",{"p-filled":c.filled}],value:n.modelValue,onInput:t[1]||(t[1]=function(){return c.onInput&&c.onInput.apply(c,arguments)})},null,42,["value"])}n("d3b7"),n("25f0");var a={emits:["update:modelValue"],props:{modelValue:null},methods:{onInput:function(e){this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0}}};a.render=o;t["default"]=a},3729:function(e,t,n){var r=n("9e69"),o=n("00fd"),a=n("29f3"),c="[object Null]",i="[object Undefined]",u=r?r.toStringTag:void 0;function s(e){return null==e?void 0===e?i:c:u&&u in Object(e)?o(e):a(e)}e.exports=s},"404c":function(e,t,n){"use strict";e.exports=n("6361")},"408c":function(e,t,n){var r=n("2b3e"),o=function(){return r.Date.now()};e.exports=o},"421e":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"p-button-label"};function a(e,t,n,a,c,i){var u=Object(r["resolveDirective"])("ripple");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])("button",{class:i.buttonClass,type:"button"},[Object(r["renderSlot"])(e.$slots,"default",{},(function(){return[n.icon?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:0,class:i.iconClass},null,2)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("span",o,Object(r["toDisplayString"])(n.label||" "),1),n.badge?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:1,class:i.badgeStyleClass},Object(r["toDisplayString"])(n.badge),3)):Object(r["createCommentVNode"])("",!0)]}))],2)),[[u]])}var c=n("c840"),i=n.n(c),u={props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null}},computed:{buttonClass:function(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":("top"===this.iconPos||"bottom"===this.iconPos)&&this.label,"p-disabled":this.$attrs.disabled}},iconClass:function(){return[this.icon,"p-button-icon",{"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label,"p-button-icon-top":"top"===this.iconPos&&this.label,"p-button-icon-bottom":"bottom"===this.iconPos&&this.label}]},badgeStyleClass:function(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&1===String(this.badge).length}]}},directives:{ripple:i.a}};u.render=a;t["default"]=u},"4d63":function(e,t,n){var r=n("83ab"),o=n("da84"),a=n("94ca"),c=n("7156"),i=n("9bf2").f,u=n("241c").f,s=n("44e7"),l=n("ad6d"),p=n("9f7f"),d=n("6eeb"),f=n("d039"),b=n("69f3").set,g=n("2626"),m=n("b622"),v=m("match"),h=o.RegExp,j=h.prototype,O=/a/g,y=/a/g,x=new h(O)!==O,k=p.UNSUPPORTED_Y,C=r&&a("RegExp",!x||k||f((function(){return y[v]=!1,h(O)!=O||h(y)==y||"/a/i"!=h(O,"i")})));if(C){var w=function(e,t){var n,r=this instanceof w,o=s(e),a=void 0===t;if(!r&&o&&e.constructor===w&&a)return e;x?o&&!a&&(e=e.source):e instanceof w&&(a&&(t=l.call(e)),e=e.source),k&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var i=c(x?new h(e,t):h(e,t),r?this:j,w);return k&&n&&b(i,{sticky:n}),i},S=function(e){e in w||i(w,e,{configurable:!0,get:function(){return h[e]},set:function(t){h[e]=t}})},V=u(h),N=0;while(V.length>N)S(V[N++]);j.constructor=w,w.prototype=j,d(o,"RegExp",w)}g("RegExp")},"54e3":function(e,t,n){},"585a":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("c8ba"))},"5e49":function(e,t,n){"use strict";n("54e3")},6549:function(e,t,n){"use strict";e.exports=n("421e")},9329:function(e,t,n){},"9e69":function(e,t,n){var r=n("2b3e"),o=r.Symbol;e.exports=o},a84a:function(e,t,n){"use strict";e.exports=n("3049")},af3d:function(e,t,n){"use strict";n("9329")},b047:function(e,t,n){var r=n("1a8c"),o=n("408c"),a=n("b4b0"),c="Expected a function",i=Math.max,u=Math.min;function s(e,t,n){var s,l,p,d,f,b,g=0,m=!1,v=!1,h=!0;if("function"!=typeof e)throw new TypeError(c);function j(t){var n=s,r=l;return s=l=void 0,g=t,d=e.apply(r,n),d}function O(e){return g=e,f=setTimeout(k,t),m?j(e):d}function y(e){var n=e-b,r=e-g,o=t-n;return v?u(o,p-r):o}function x(e){var n=e-b,r=e-g;return void 0===b||n>=t||n<0||v&&r>=p}function k(){var e=o();if(x(e))return C(e);f=setTimeout(k,y(e))}function C(e){return f=void 0,h&&s?j(e):(s=l=void 0,d)}function w(){void 0!==f&&clearTimeout(f),g=0,s=b=l=f=void 0}function S(){return void 0===f?d:C(o())}function V(){var e=o(),n=x(e);if(s=arguments,l=this,b=e,n){if(void 0===f)return O(b);if(v)return clearTimeout(f),f=setTimeout(k,t),j(b)}return void 0===f&&(f=setTimeout(k,t)),d}return t=a(t)||0,r(n)&&(m=!!n.leading,v="maxWait"in n,p=v?i(a(n.maxWait)||0,t):p,h="trailing"in n?!!n.trailing:h),V.cancel=w,V.flush=S,V}e.exports=s},b4b0:function(e,t,n){var r=n("1a8c"),o=n("ffd6"),a=NaN,c=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function p(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=u.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):i.test(e)?a:+e}e.exports=p},be88:function(e,t,n){"use strict";n("b0c0");var r=n("7a23");function o(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("RouterLink");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{to:"/group/"+e.group.id},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.group.name)+"#"+Object(r["toDisplayString"])(e.group.id),1)]})),_:1},8,["to"])}var a={props:{group:{type:Object,required:!0}}};a.render=o;t["a"]=a},d58f:function(e,t,n){var r=n("1c0b"),o=n("7b0b"),a=n("44ad"),c=n("50c4"),i=function(e){return function(t,n,i,u){r(n);var s=o(t),l=a(s),p=c(s.length),d=e?p-1:0,f=e?-1:1;if(i<2)while(1){if(d in l){u=l[d],d+=f;break}if(d+=f,e?d<0:p<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:p>d;d+=f)d in l&&(u=n(u,l[d],d,s));return u}};e.exports={left:i(!1),right:i(!0)}},ed22:function(e,t,n){"use strict";n.r(t);n("4de4");var r=n("7a23"),o={class:"profile"};function a(e,t,n,a,c,i){var u=Object(r["resolveComponent"])("TaskFilter"),s=Object(r["resolveComponent"])("TaskTable");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(u,{pending:e.pending,text:e.filter.text,"onUpdate:text":t[1]||(t[1]=function(t){return e.filter.text=t}),groupId:e.filter.groupId,"onUpdate:groupId":t[2]||(t[2]=function(t){return e.filter.groupId=t}),hideGroup:e.hasGroup,hideUser:"",onSubmit:e.onFilter},null,8,["pending","text","groupId","hideGroup","onSubmit"]),Object(r["createVNode"])(s,{title:e.tableTitle,tasks:e.tasks,pending:e.pending,page:e.meta&&e.meta.page,perPage:e.meta&&e.meta.perPage,totalCount:e.meta&&e.meta.totalCount,class:"p-mt-3",onPage:e.onChangePage},null,8,["title","tasks","pending","page","perPage","totalCount","onPage"])])}var c=n("3835"),i=(n("96cf"),n("1da1")),u=n("5530"),s=n("5502"),l=n("f31b"),p=n.n(l),d=Object(r["createTextVNode"])(" Фильтр задач "),f={class:"p-grid"},b={class:"p-col-fixed"},g={class:"p-input-icon-left"},m=Object(r["createVNode"])("i",{class:"pi pi-search"},null,-1),v={key:0,class:"p-col-fixed"},h={key:1,class:"p-col-fixed"},j={class:"p-col-fixed"};function O(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("InputText"),u=Object(r["resolveComponent"])("GroupPicker"),s=Object(r["resolveComponent"])("UserPicker"),l=Object(r["resolveComponent"])("Button"),p=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(p,null,{title:Object(r["withCtx"])((function(){return[d]})),content:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("form",{class:"task-filter",onSubmit:t[4]||(t[4]=Object(r["withModifiers"])((function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)}),["prevent"]))},[Object(r["createVNode"])("div",f,[Object(r["createVNode"])("div",b,[Object(r["createVNode"])("span",g,[m,Object(r["createVNode"])(i,{modelValue:e.compText,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.compText=t}),disabled:e.pending,type:"text",placeholder:"Заголовок"},null,8,["modelValue","disabled"])])]),e.hideGroup?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",v,[Object(r["createVNode"])(u,{modelValue:e.compGroupId,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.compGroupId=t}),disabled:e.pending},null,8,["modelValue","disabled"])])),e.hideUser?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",h,[Object(r["createVNode"])(s,{modelValue:e.compUserId,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.compUserId=t}),disabled:e.pending},null,8,["modelValue","disabled"])])),Object(r["createVNode"])("div",j,[Object(r["createVNode"])(l,{type:"submit",label:"Поиск",icon:"pi pi-search"})])])],32)]})),_:1})}n("a9e3");var y=n("a7ca"),x=n.n(y),k=n("a84a"),C=n.n(k),w=n("6549"),S=n.n(w),V=Object(r["withScopeId"])("data-v-a5a642d8"),N=V((function(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("Dropdown");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{class:"group-picker",optionLabel:"name",optionValue:"id",dataKey:"id",placeholder:"Отдел",filterPlaceholder:"Поиск",emptyFilterMessage:"Отделы не найдены",filter:"",showClear:"",options:e.groups,onFilter:e.searchGroups},null,8,["options","onFilter"])})),B=n("404c"),T=n.n(B),I=n("0f32"),P=n.n(I),R=n("23ba"),U={components:{Dropdown:T.a},data:function(){return{groups:[]}},methods:{searchGroups:P()(Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.value,r=void 0===n?"":n,e.prev=1,e.next=4,Object(R["b"])(this.$axios,r);case 4:this.groups=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])}))),300)},mounted:function(){this.searchGroups()}};n("af3d");U.render=N,U.__scopeId="data-v-a5a642d8";var $=U,D=Object(r["withScopeId"])("data-v-c9d0dcd8"),G=D((function(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("Dropdown");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{class:"user-picker",optionLabel:"username",optionValue:"id",dataKey:"id",filterPlaceholder:"Поиск",emptyFilterMessage:"Пользователи не найдены",filter:"",showClear:"",options:e.users,placeholder:e.placeholder,onFilter:e.searchUsers},null,8,["options","placeholder","onFilter"])})),E=n("c24f"),_={components:{Dropdown:T.a},props:{placeholder:{type:String,default:"Пользователь"}},data:function(){return{users:[]}},methods:{searchUsers:P()(Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.value,r=void 0===n?"":n,e.prev=1,e.next=4,Object(E["c"])(this.$axios,r);case 4:this.users=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])}))),300)},mounted:function(){this.searchUsers()}};n("5e49");_.render=G,_.__scopeId="data-v-c9d0dcd8";var F=_;n("99af"),n("13d5"),n("b64b"),n("4d63"),n("ac1f"),n("25f0"),n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function M(e){return M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}var A=function(e){return"comp".concat(e[0].toUpperCase()).concat(e.substr(1))},L=function(e){return e.reduce((function(e,t){var n=A(String(t));return e[n]={get:function(){return this[t]},set:function(e){this.$emit("update:".concat(t),e)}},e}),{})},W=function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return t[n]={get:function(){return this[r]},set:function(e){this.$emit("update:".concat(r),e)}},t}),{})},q=function(e){if(Array.isArray(e))return L(e);if("object"===M(e)&&null!==e&&!(e instanceof RegExp))return W(e);throw new Error("[MapSyncProps] Bad argument")},J={components:{Card:x.a,InputText:C.a,Button:S.a,GroupPicker:$,UserPicker:F},props:{pending:{type:Boolean,default:!1},hideGroup:{type:Boolean,default:!1},hideUser:{type:Boolean,default:!1},text:{type:String,default:""},userId:{type:Number,default:null},groupId:{type:Number,default:null}},emits:["submit","update:text","update:userId","update:groupId"],computed:Object(u["a"])({},q(["text","userId","groupId"])),methods:{onSubmit:function(){this.$emit("submit")}}};J.render=O;var K=J,Y=Object(r["createVNode"])("div",{class:"p-text-center"}," Задачи не найдены ",-1);function z(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("Column"),u=Object(r["resolveComponent"])("TaskStatus"),s=Object(r["resolveComponent"])("Group"),l=Object(r["resolveComponent"])("User"),p=Object(r["resolveComponent"])("DataTable");return Object(r["openBlock"])(),Object(r["createBlock"])(p,{title:e.title,items:e.tasks,pending:e.pending,page:e.page,perPage:e.perPage,totalCount:e.totalCount,onRowSelect:e.onRowSelect},{empty:Object(r["withCtx"])((function(){return[Y]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{field:"id",header:"#"}),Object(r["createVNode"])(i,{field:"title",header:"Название"}),Object(r["createVNode"])(i,{field:"status",header:"Статус",headerClass:"p-text-center",bodyClass:"p-text-center"},{body:Object(r["withCtx"])((function(e){var t=e.data.status;return[Object(r["createVNode"])(u,{value:t},null,8,["value"])]})),_:1}),Object(r["createVNode"])(i,{field:"group",header:"Отдел",headerClass:"p-text-center",bodyClass:"p-text-center"},{body:Object(r["withCtx"])((function(e){var t=e.data.group;return[Object(r["createVNode"])(s,{group:t},null,8,["group"])]})),_:1}),Object(r["createVNode"])(i,{field:"user",header:"Пользователь",headerClass:"p-text-center",bodyClass:"p-text-center"},{body:Object(r["withCtx"])((function(e){var t=e.data.user;return[Object(r["createVNode"])(l,{user:t},null,8,["user"])]})),_:1})]})),_:1},8,["title","items","pending","page","perPage","totalCount","onRowSelect"])}var H=n("c524"),Q=n.n(H),X=n("0dd2"),Z=n("84d7"),ee={key:1};function te(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("RouterLink");return e.user?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,to:"/user/".concat(e.user.id,"/profile")},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.user.username)+"#"+Object(r["toDisplayString"])(e.user.id),1)]})),_:1},8,["to"])):(Object(r["openBlock"])(),Object(r["createBlock"])("span",ee," Удалён "))}var ne={props:{user:{type:Object,default:null}}};ne.render=te;var re=ne,oe=n("be88"),ae={components:{Column:Q.a,DataTable:X["a"],TaskStatus:Z["a"],User:re,Group:oe["a"]},props:{title:{type:String,default:"Задачи"},tasks:{type:Array,default:function(){return[]}},pending:{type:Boolean,default:!1},page:{type:Number,default:1},perPage:{type:Number,default:20},totalCount:{type:Number,default:0}},methods:{onRowSelect:function(e){this.$router.push("/task/".concat(e.id))}}};ae.render=z;var ce=ae,ie=n("b199"),ue={components:{TaskFilter:K,TaskTable:ce},props:{user:{type:Object,required:!0}},data:function(){return{pending:!0,tasks:[],meta:null,filter:{text:"",userId:null,groupId:null}}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(s["d"])("user",["id","groupId"])),Object(s["c"])("user",["hasGroup"])),{},{isMe:function(){return this.id===this.user.id},tableTitle:function(){return this.isMe?"Мои задачи":"Задачи"}}),methods:{onFilter:function(){this.loadTasks()},onChangePage:function(e){this.loadTasks(e.page+1,e.rows)},loadTasks:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,a,i,s,l,d,f,b,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,o=e.length>1&&void 0!==e[1]?e[1]:20,a=Object(u["a"])(Object(u["a"])({},t.filter),{},{page:r,perPage:o}),t.pending=!0,n.next=6,p()(Object(ie["a"])(t.$axios,a));case 6:if(i=n.sent,s=Object(c["a"])(i,2),l=s[0],d=s[1],d=void 0===d?{}:d,f=d.items,b=d.meta,g=void 0===b?null:b,!l){n.next=16;break}return t.$toast.add({severity:"error",summary:l.serverError||"Ошибка загрузки задач",life:5e3}),t.pending=!1,n.abrupt("return");case 16:t.tasks=f,t.meta=g,t.pending=!1;case 19:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.user,r=n.id,o=n.groupId,e.filter.userId=r,o&&(e.filter.groupId=o),t.next=5,e.loadTasks();case 5:case"end":return t.stop()}}),t)})))()}};ue.render=a;t["default"]=ue},ffd6:function(e,t,n){var r=n("3729"),o=n("1310"),a="[object Symbol]";function c(e){return"symbol"==typeof e||o(e)&&r(e)==a}e.exports=c}}]);
//# sourceMappingURL=chunk-3fd92618.0724f4e5.js.map