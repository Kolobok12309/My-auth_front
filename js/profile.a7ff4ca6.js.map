{"version":3,"sources":["webpack:///./src/pages/user/settings/tokens-table/index.styl?afdc","webpack:///./src/components/date/index.vue","webpack:///./src/components/date/index.js","webpack:///./src/components/date/index.vue?e03a","webpack:///./src/pages/user/index.vue","webpack:///./src/pages/user/components.js","webpack:///./src/pages/user/index.js","webpack:///./src/pages/user/index.vue?ddd6","webpack:///./src/components/date/index.styl?dde0","webpack:///./src/pages/user/settings/settings-form/index.styl?8f27","webpack:///./src/pages/user/settings/index.vue","webpack:///./src/pages/user/settings/settings-form/index.vue","webpack:///./src/pages/user/settings/settings-form/components.js","webpack:///./src/pages/user/settings/settings-form/index.js","webpack:///./src/pages/user/settings/settings-form/index.vue?84b0","webpack:///./src/pages/user/settings/tokens-table/index.vue","webpack:///./src/pages/user/settings/tokens-table/index.js","webpack:///./src/pages/user/settings/tokens-table/index.vue?3f5b","webpack:///./src/pages/user/settings/index.js","webpack:///./src/pages/user/settings/index.vue?abe2","webpack:///./src/pages/user/index.styl?5f07","webpack:///./src/pages/user/profile/index.vue","webpack:///./src/pages/user/profile/index.js","webpack:///./src/pages/user/profile/index.vue?7bf9"],"names":["class","text","props","value","type","Number","String","Date","default","computed","this","date","toLocaleString","render","__scopeId","title","content","pending","user","username","href","email","group","role","model","toolbarItems","isMe","onUpdate","Component","max","key","$route","fullPath","Card","Divider","Menubar","RoleView","SkeletonHelper","SpinnerHelper","GroupView","name","components","id","required","data","mapState","myId","mapGetters","label","icon","to","visible","isAdmin","methods","flatry","getUser","axiosInstance","err","$toast","add","severity","summary","serverError","life","$store","commit","beforeRouteEnter","from","next","params","console","error","vm","beforeRouteUpdate","settingsPending","onSettingsUpdate","tokens","tokensPending","onTokenDelete","for","onSubmit","userData","disabled","placeholder","groupId","inputId","showRoles","InputText","Button","GroupPicker","RolePicker","Object","Boolean","emits","userIsAdmin","watch","handler","immediate","resetUserData","$emit","items","paginator","empty","field","header","headerClass","bodyClass","body","createdAt","onDelete","Column","DataTable","DateView","Array","token","SettingsForm","TokensTable","loadTokens","method","getTokens","getUserTokens","$axios","revokeToken","tokenIndex","indexOf","splice","updateUser","mounted","filter","status","hideGroup","hasGroup","hideUser","onFilter","tableTitle","tasks","page","meta","perPage","totalCount","onChangePage","TaskFilter","TaskTable","userId","newVal","loadTasks","event","rows","query","getTasks"],"mappings":"2GAAA,W,qJCCQA,MAAM,Q,yFAAZ,yBAEO,OAFP,EAEO,6BADF,EAAAC,MAAI,MCFI,G,UAAA,CACbC,MAAO,CACLC,MAAO,CACLC,KAAM,CAACC,OAAQC,OAAQC,MACvBC,QAAS,OAIbC,SAAU,CACRR,KADQ,WAEN,IAAKS,KAAKP,MAAO,MAAO,aAExB,IAAMQ,EAAO,IAAIJ,KAAKG,KAAKP,OAE3B,OAAOQ,EAAKC,qB,UCTlB,EAAOC,OAASA,EAChB,EAAOC,UAAY,kBAEJ,U,4JCPRd,MAAM,2B,GACJA,MAAM,mD,+BAEU,gB,+BAWoB,a,+BAWL,Y,GAgB/BA,MAAM,4C,GAMJA,MAAM,8B,scA/Cf,yBAoEM,MApEN,EAoEM,CAnEJ,yBAsCM,MAtCN,EAsCM,CArCJ,yBAoCO,QAnCMe,MAAK,GAAC,iBAEjB,C,MAEWC,QAAO,GAChB,iBAEiB,CAFjB,yBAEiB,GAFAC,QAAS,EAAAA,SAAO,C,WAAE,iBAC1B,C,6BAD0B,WAC1B,6BAAG,EAAAC,KAAKC,UAAQ,O,oBAGzB,yBAAW,GAEX,yBAMiB,GANAF,QAAS,EAAAA,SAAO,C,WAAE,iBAGjC,C,EAAA,yBAEI,KAFAG,KAAI,UAAc,EAAAF,KAAKG,O,6BACtB,EAAAH,KAAKG,OAAK,gB,oBAIjB,yBAAW,GAEX,yBAMiB,GANAJ,QAAS,EAAAA,SAAO,C,WAC/B,iBAIW,CAJK,EAAAC,KAAKI,O,yBAArB,yBAIW,uB,EADT,yBAAiC,GAArBA,MAAO,EAAAJ,KAAKI,O,uFAIb,EAAAL,SAAW,EAAAC,KAAKI,O,yBAA/B,yBAAwC,Y,uCAExC,yBAEiB,GAFAL,QAAS,EAAAA,SAAO,C,WAC/B,iBAA+B,CAA/B,yBAA+B,GAApBd,MAAO,EAAAe,KAAKK,M,sDAM/B,yBA0BM,MA1BN,EA0BM,CAzBJ,yBAGE,GAFCC,MAAO,EAAAC,aACRzB,MAAM,U,kBAGR,yBAmBM,MAnBN,EAmBM,CAlBJ,yBAiBgB,GAhBbiB,QAAS,EAAAA,QACVjB,MAAM,oB,YAEN,iBAYc,CAZd,yBAYc,GAXXkB,KAAM,EAAAA,KACNQ,KAAM,EAAAA,KACN,SAAQ,EAAAC,U,YAGT,gBAFUC,EAEV,EAFUA,UAEV,MAFmB,E,yBAEnB,yBAKa,gBALDC,IAAI,KAAG,E,yBACjB,yBAGE,qCAFKD,GAAS,CACbE,IAAK,EAAAC,OAAOC,a,mTCrDd,GACbC,SACAC,YACAC,YACAC,gBACAC,sBACAC,qBACAC,kBCRa,GACbC,KAAM,WAENC,aAEAvC,MAAO,CACLwC,GAAI,CACFtC,KAAMC,OACNsC,UAAU,IAIdC,KAZa,WAaX,MAAO,CACL1B,KAAM,KACND,SAAS,IAIbR,SAAU,gDACLoC,eAAS,OAAQ,CAClBC,KAAM,QAGLC,eAAW,OAAQ,CAAC,aALjB,IAONrB,KAPQ,WAQN,OAAOhB,KAAKgC,KAAOhC,KAAKoC,MAG1BrB,aAXQ,WAWO,WACLiB,EAAOhC,KAAPgC,GAER,MAAO,CACL,CACEM,MAAO,UACPC,KAAM,aACNC,GAAI,SAAF,OAAWR,EAAX,aAEJ,CACEM,MAAO,YACPC,KAAM,YACNC,GAAI,SAAF,OAAWR,EAAX,aACFS,QAAS,kBAAM,EAAKzB,MAAQ,EAAK0B,cAMzCC,QAAS,CACD1B,SADC,WACU,oLACW2B,IAAOC,eAAQC,OAAe,EAAKd,KAD9C,yCACRe,EADQ,KACHvC,EADG,MAGXuC,EAHW,uBAIb,EAAKC,OAAOC,IAAI,CACdC,SAAU,QACVC,QAASJ,EAAIK,aAAe,8CAC5BC,KAAM,MAPK,0BAYf,EAAK7C,KAAOA,EACR,EAAKQ,MAAM,EAAKsC,OAAOC,OAAO,eAAgB/C,GAbnC,gDAiBbgD,iBAnEO,SAmEUhB,EAAIiB,EAAMC,GAAM,kKAC7B1B,EAAOQ,EAAGmB,OAAV3B,GAD6B,SAGXY,IAAOC,eAAQC,OAAed,IAHnB,yCAG9Be,EAH8B,KAGzBvC,EAHyB,MAKjCuC,EALiC,wBAMnCa,QAAQC,MAAMd,GANqB,kBAO5BW,GAAK,IAPuB,QAUrCA,GAAK,SAACI,GAEJA,EAAGtD,KAAOA,EAEVsD,EAAGvD,SAAU,KAdsB,+CAkBjCwD,kBArFO,SAqFWvB,EAAIiB,EAAMC,GAAM,yKAC9B1B,EAAOQ,EAAGmB,OAAV3B,GAEJA,IAAOyB,EAAKE,OAAO3B,GAHe,yCAGJ0B,KAHI,cAKtC,EAAKnD,SAAU,EALuB,SAMZqC,IAAOC,eAAQC,OAAed,IANlB,sCAM/Be,EAN+B,KAM1BvC,EAN0B,KAOtC,EAAKD,SAAU,EAEXwC,GACFa,QAAQC,MAAMd,GACdW,GAAK,KAEL,EAAKlD,KAAOA,EACZkD,KAdoC,gD,UCxF1C,EAAOvD,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,2DCRf,W,oCCAA,W,oNCCE,yBAcM,YAbJ,yBAKE,GAJCI,KAAM,EAAAA,KACNQ,KAAM,EAAAA,KACNT,QAAS,EAAAyD,gBACT,SAAQ,EAAAC,kB,6CAGX,yBAKE,GAJCC,OAAQ,EAAAA,OACR3D,QAAS,EAAA4D,cACV7E,MAAM,SACL,SAAQ,EAAA8E,e,oQCXM,e,GASR9E,MAAM,uB,EACT,yBAEQ,SAFD+E,IAAI,SAAQ,YAEnB,G,EAYA,yBAEQ,SAFDA,IAAI,SAAQ,YAEnB,G,EAWE,yBAEQ,SAFDA,IAAI,QAAO,WAElB,G,GAYC/E,MAAM,iB,GACJA,MAAM,e,yTArDnB,yBAgEO,QA/DMe,MAAK,GAAC,iBAEjB,C,MAEWC,QAAO,GAChB,iBAwDO,CAxDP,yBAwDO,QAvDLhB,MAAM,gBACL,SAAM,0DAAU,EAAAgF,UAAA,EAAAA,SAAA,qBAAQ,e,CAEzB,yBAwCM,MAxCN,EAwCM,CAvCJ,EAIA,yBAQM,YAPJ,yBAME,G,WALS,EAAAC,SAAS5D,M,qDAAT,EAAA4D,SAAS5D,MAAK,IACtB6D,SAAU,EAAAjE,QACXyB,GAAG,QACHyC,YAAY,sBACZ/E,KAAK,Q,oCAIT,EAIA,yBAMM,YALJ,yBAIE,G,WAHS,EAAA6E,SAASG,Q,qDAAT,EAAAH,SAASG,QAAO,IACxBF,SAAU,EAAAjE,QACXoE,QAAQ,S,oCAII,EAAAC,W,yBAAhB,yBAYW,uBAXT,EAIA,yBAMM,YALJ,yBAIE,G,WAHS,EAAAL,SAAS1D,K,qDAAT,EAAA0D,SAAS1D,KAAI,IACrB2D,SAAU,EAAAjE,QACXoE,QAAQ,Q,mFAMhB,yBASM,MATN,EASM,CARJ,yBAOM,MAPN,EAOM,CANJ,yBAKE,GAJCH,SAAU,EAAAjE,QACX+B,MAAM,YACNC,KAAK,aACL7C,KAAK,U,0JCpDJ,GACb6B,SACAsD,cACAC,WACAC,mBACAC,mBCRa,GACbjD,aAEAvC,MAAO,CACLgB,KAAM,CACJd,KAAMuF,OACNhD,UAAU,GAGZjB,KAAM,CACJtB,KAAMwF,QACNpF,SAAS,GAGXS,QAAS,CACPb,KAAMwF,QACNpF,SAAS,IAIbqF,MAAO,CAAC,UAERjD,KAtBa,WAuBX,MAAO,CACLqC,SAAU,OAIdxE,SAAU,iCACLsC,eAAW,OAAQ,CAAC,aADjB,IAGN+C,YAHQ,WAIN,OAA0B,IAAnBpF,KAAKQ,KAAKK,MAGnB+D,UAPQ,WAQN,OAAO5E,KAAK0C,UAAY1C,KAAKgB,OAAShB,KAAKoF,gBAI/CC,MAAO,CACL7E,KAAM,CACJ8E,QAAS,gBACTC,WAAW,IAIf5C,QAAS,CACP6C,cADO,WACS,MAC8BxF,KAAKQ,KAAzCG,EADM,EACNA,MADM,IACC+D,eADD,MACW,KADX,MACiB7D,YADjB,MACwB,EADxB,EAGdb,KAAKuE,SAAW,CACd5D,QACA+D,UACA7D,SAIJyD,SAXO,WAYL,IAAMpC,EAAO,kBAAKlC,KAAKuE,UAElBvE,KAAK4E,kBAAkB1C,EAAKrB,KAEjCb,KAAKyF,MAAM,SAAUvD,M,UC9D3B,EAAO/B,OAAS,EAChB,EAAOC,UAAY,kBAEJ,Q,ECCT,yBAEM,OAFDd,MAAM,iBAAgB,uBAE3B,G,+LAVJ,yBAmDY,GAlDVe,MAAM,yBACLqF,MAAO,EAAAxB,OACP3D,QAAS,EAAAA,QACToF,WAAW,EACZrG,MAAM,gB,CAEKsG,MAAK,sBACd,iBAEM,CAFN,M,8BAKF,iBAKE,CALF,yBAKE,GAJAC,MAAM,KACNC,OAAO,IACPC,YAAY,gBACZC,UAAU,kBAGZ,yBAIE,GAHAH,MAAM,YACNC,OAAO,YACPE,UAAU,6BAGZ,yBAGE,GAFAH,MAAM,KACNC,OAAO,aAGT,yBAOS,GANPD,MAAM,YACNC,OAAO,Q,CAEIG,KAAI,sBACb,gBADiB/D,EACjB,EADiBA,KACjB,MADqB,CACrB,yBAAoC,GAAzBzC,MAAOyC,EAAKgE,W,4BAI3B,yBAUS,GATPL,MAAM,UACNC,OAAO,K,CAEIG,KAAI,sBACb,gBADiB/D,EACjB,EADiBA,KACjB,MADqB,CACrB,yBAGE,KAFA5C,MAAM,cACL,QAAK,+CAAO,EAAA6G,SAASjE,KAAI,W,+GC3CrB,GACbH,WAAY,CACVqE,WACAC,iBACAC,iBAGF9G,MAAO,CACL0E,OAAQ,CACNxE,KAAM6G,MACNzG,QAAS,iBAAM,KAGjBS,QAAS,CACPb,KAAMwF,QACNpF,SAAS,IAIbqF,MAAO,CAAC,UAERxC,QAAS,CACPwD,SADO,SACEK,GACPxG,KAAKyF,MAAM,SAAUe,M,UCvB3B,EAAOrG,OAAS,EAED,QCEA,GACb4B,WAAY,CACV0E,eACAC,eAGFlH,MAAO,CACLgB,KAAM,CACJd,KAAMuF,OACNhD,UAAU,GAGZjB,KAAM,CACJtB,KAAMwF,QACNjD,UAAU,IAIdkD,MAAO,CAAC,UAERjD,KApBa,WAqBX,MAAO,CACLgC,OAAQ,GACRC,eAAe,EAEfH,iBAAiB,IAIrBrB,QAAS,CACDgE,WADC,WACY,+KACXC,EAAS,EAAK5F,KAAO6F,OAAYC,OAEvC,EAAK3C,eAAgB,EAHJ,SAIgBvB,IAAOgE,EAAO,EAAKG,OAAQ,EAAKvG,KAAKwB,KAJrD,yCAIVe,EAJU,YAILmB,OAJK,MAII,GAJJ,GAMbnB,EANa,wBAOf,EAAKC,OAAOC,IAAI,CACdC,SAAU,QACVC,QAASJ,EAAIK,aAAe,0BAC5BC,KAAM,MAER,EAAKc,eAAgB,EAZN,2BAgBjB,EAAKD,OAASA,EACd,EAAKC,eAAgB,EAjBJ,+CAoBbC,cArBC,SAqBaoC,GAAO,6KACjBxE,EAAOwE,EAAPxE,GAER,EAAKmC,eAAgB,EAHI,SAILvB,IAAOoE,eAAY,EAAKD,OAAQ/E,IAJ3B,yCAIlBe,EAJkB,MAMrBA,EANqB,wBAOvB,EAAKC,OAAOC,IAAI,CACdC,SAAU,QACVC,QAASJ,EAAIK,aAAe,6BAC5BC,KAAM,MAER,EAAKc,eAAgB,EAZE,2BAgBnB8C,EAAa,EAAK/C,OAAOgD,QAAQV,IAClCS,GACH,EAAK/C,OAAOiD,OAAOF,EAAY,GAGjC,EAAKjE,OAAOC,IAAI,CACdC,SAAU,UACVC,QAAS,uBACTE,KAAM,MAER,EAAKc,eAAgB,EA1BI,+CA6BrBF,iBAlDC,SAkDgB/B,GAAM,2KACnBF,EAAO,EAAKxB,KAAZwB,GAER,EAAKgC,iBAAkB,EAHI,SAIPpB,IAAOwE,eAAW,EAAKL,OAAQ/E,EAAIE,IAJ5B,yCAIpBa,EAJoB,MAMvBA,EANuB,wBAOzB,EAAKC,OAAOC,IAAI,CACdC,SAAU,QACVC,QAASJ,EAAIK,aAAe,gCAC5BC,KAAM,MAER,EAAKW,iBAAkB,EAZE,2BAgB3B,EAAKhB,OAAOC,IAAI,CACdC,SAAU,UACVC,QAAS,6BACTE,KAAM,MAER,EAAKoC,MAAM,UAEX,EAAKzB,iBAAkB,EAvBI,gDA2BzBqD,QA1GO,WA0GG,wKACR,EAAKV,aADG,+CChHlB,EAAOxG,OAASA,EAED,gB,yGCLf,W,sECCOb,MAAM,W,uJAAX,yBAqBM,MArBN,EAqBM,CApBJ,yBAQE,GAPCiB,QAAS,EAAAA,QACFF,MAAO,EAAAiH,OAAOjH,M,gDAAP,EAAAiH,OAAOjH,MAAK,IACnBkH,OAAQ,EAAAD,OAAOC,O,iDAAP,EAAAD,OAAOC,OAAM,IACrB7C,QAAS,EAAA4C,OAAO5C,Q,kDAAP,EAAA4C,OAAO5C,QAAO,IAC9B8C,UAAW,EAAAC,SACZC,SAAA,GACC,SAAQ,EAAAC,U,sEAGX,yBASE,GARCtH,MAAO,EAAAuH,WACPC,MAAO,EAAAA,MACPtH,QAAS,EAAAA,QACTuH,KAAM,EAAAC,MAAQ,EAAAA,KAAKD,KACnBE,QAAS,EAAAD,MAAQ,EAAAA,KAAKC,QACtBC,WAAY,EAAAF,MAAQ,EAAAA,KAAKE,WAC1B3I,MAAM,SACL,OAAM,EAAA4I,c,0LCbE,GACbnG,WAAY,CACVoG,kBACAC,kBAGF5I,MAAO,CACLgB,KAAM,CACJd,KAAMuF,OACNhD,UAAU,GAGZjB,KAAM,CACJtB,KAAMwF,QACNjD,UAAU,IAIdC,KAlBa,WAmBX,MAAO,CACL3B,SAAS,EAETsH,MAAO,GACPE,KAAM,KAENT,OAAQ,CACNjH,MAAO,GACPkH,OAAQ,KACRc,OAAQ,KACR3D,QAAS,QAKf3E,SAAU,CACR6H,WADQ,WAEN,OAAO5H,KAAKgB,KACR,aACA,UAGNyG,SAPQ,WAQN,OAA6B,OAAtBzH,KAAKQ,KAAKkE,UAIrBW,MAAO,CACL7E,KAAM,CACE8E,QADF,SACUgD,GAAQ,uKACZtG,EAAgBsG,EAAhBtG,GAAI0C,EAAY4D,EAAZ5D,QAEZ,EAAK4C,OAAOe,OAASrG,EACjB0C,IAAS,EAAK4C,OAAO5C,QAAUA,GAJf,SAMd,EAAK6D,YANS,8CAQtBhD,WAAW,IAIf5C,QAAS,CACPgF,SADO,WAEL3H,KAAKuI,aAGPL,aALO,SAKMM,GACXxI,KAAKuI,UAAUC,EAAMV,KAAO,EAAGU,EAAMC,OAGjCF,UATC,WASiC,mMAAxBT,EAAwB,+BAAjB,EAAGE,EAAc,+BAAJ,GAC5BU,EADgC,iCAEjC,EAAKpB,QAF4B,IAGpCQ,OACAE,YAGF,EAAKzH,SAAU,EAPuB,SAQWqC,IAAO+F,eAAS,EAAK5B,OAAQ2B,IARxC,yCAQ/B3F,EAR+B,yBAQD,GARC,EAQxB2C,EARwB,EAQxBA,MARwB,IAQjBqC,YARiB,MAQV,KARU,GAUlChF,EAVkC,wBAWpC,EAAKC,OAAOC,IAAI,CACdC,SAAU,QACVC,QAASJ,EAAIK,aAAe,wBAC5BC,KAAM,MAER,EAAK9C,SAAU,EAhBqB,2BAoBtC,EAAKsH,MAAQnC,EACb,EAAKqC,KAAOA,EACZ,EAAKxH,SAAU,EAtBuB,iDCzE5C,EAAOJ,OAASA,EAED","file":"js/profile.a7ff4ca6.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./index.styl?vue&type=style&index=0&lang=stylus\"","<template>\n  <span class=\"date\">\n    {{ text }}\n  </span>\n</template>\n\n<script src=\"./index.js\"></script>\n\n<style\n  src=\"./index.styl\"\n  lang=\"stylus\"\n  scoped\n></style>\n","export default {\n  props: {\n    value: {\n      type: [Number, String, Date],\n      default: null,\n    },\n  },\n\n  computed: {\n    text() {\n      if (!this.value) return 'Не указана';\n\n      const date = new Date(this.value);\n\n      return date.toLocaleString();\n    },\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=e13a1f92&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport \"./index.styl?vue&type=style&index=0&id=e13a1f92&lang=stylus&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-e13a1f92\"\n\nexport default script","<template>\n  <div class=\"user-page p-grid p-mx-0\">\n    <div class=\"p-col-12 p-md-4 p-xl-2 p-offset-0 p-xl-offset-2\">\n      <Card>\n        <template #title>\n          Информация\n        </template>\n\n        <template #content>\n          <SkeletonHelper :pending=\"pending\">\n            Логин: {{ user.username }}\n          </SkeletonHelper>\n\n          <Divider />\n\n          <SkeletonHelper :pending=\"pending\">\n            E-mail:\n\n            <a :href=\"'mailto:' + user.email\">\n              {{ user.email }}\n            </a>\n          </SkeletonHelper>\n\n          <Divider />\n\n          <SkeletonHelper :pending=\"pending\">\n            <template v-if=\"user.group\">\n              Отдел:\n\n              <GroupView :group=\"user.group\" />\n            </template>\n          </SkeletonHelper>\n\n          <Divider v-if=\"pending || user.group\" />\n\n          <SkeletonHelper :pending=\"pending\">\n            <RoleView :value=\"user.role\" />\n          </SkeletonHelper>\n        </template>\n      </Card>\n    </div>\n\n    <div class=\"user-page__center p-col-12 p-md-8 p-xl-6\">\n      <Menubar\n        :model=\"toolbarItems\"\n        class=\"p-mb-3\"\n      />\n\n      <div class=\"user-page__center__content\">\n        <SpinnerHelper\n          :pending=\"pending\"\n          class=\"p-mx-auto p-mt-6\"\n        >\n          <router-view\n            :user=\"user\"\n            :isMe=\"isMe\"\n            @update=\"onUpdate\"\n            v-slot=\"{ Component }\"\n          >\n            <keep-alive max=\"2\">\n              <component\n                :is=\"Component\"\n                :key=\"$route.fullPath\"\n              />\n            </keep-alive>\n          </router-view>\n        </SpinnerHelper>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>\n\n<style\n  src=\"./index.styl\"\n  lang=\"stylus\"\n  scoped\n></style>\n","import Card from 'primevue/card';\nimport Divider from 'primevue/divider';\nimport Menubar from 'primevue/menubar';\n\nimport RoleView from '@/components/role/view';\nimport SkeletonHelper from '@/components/skeleton-helper';\nimport SpinnerHelper from '@/components/spinner-helper';\nimport GroupView from '@/components/group/view';\n\nexport default {\n  Card,\n  Divider,\n  Menubar,\n  RoleView,\n  SkeletonHelper,\n  SpinnerHelper,\n  GroupView,\n};\n","import flatry from 'flatry';\nimport { mapState, mapGetters } from 'vuex';\n\nimport { axiosInstance } from '@/plugins/axios';\nimport { getUser } from '@/api/user';\n\nimport components from './components';\n\nexport default {\n  name: 'UserPage',\n\n  components,\n\n  props: {\n    id: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      user: null, // Async\n      pending: true,\n    };\n  },\n\n  computed: {\n    ...mapState('user', {\n      myId: 'id',\n    }),\n\n    ...mapGetters('user', ['isAdmin']),\n\n    isMe() {\n      return this.id === this.myId;\n    },\n\n    toolbarItems() {\n      const { id } = this;\n\n      return [\n        {\n          label: 'Профиль',\n          icon: 'pi pi-user',\n          to: `/user/${id}/profile`,\n        },\n        {\n          label: 'Настройки',\n          icon: 'pi pi-cog',\n          to: `/user/${id}/settings`,\n          visible: () => this.isMe || this.isAdmin,\n        },\n      ];\n    },\n  },\n\n  methods: {\n    async onUpdate() {\n      const [err, user] = await flatry(getUser(axiosInstance, this.id));\n\n      if (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: err.serverError || 'Ошибка обновления информации о пользователе',\n          life: 5000,\n        });\n        return;\n      }\n\n      this.user = user;\n      if (this.isMe) this.$store.commit('user/setUser', user);\n    },\n  },\n\n  async beforeRouteEnter(to, from, next) {\n    const { id } = to.params;\n\n    const [err, user] = await flatry(getUser(axiosInstance, id));\n\n    if (err) {\n      console.error(err);\n      return next(false);\n    }\n\n    next((vm) => {\n      // eslint-disable-next-line no-param-reassign\n      vm.user = user;\n      // eslint-disable-next-line no-param-reassign\n      vm.pending = false;\n    });\n  },\n\n  async beforeRouteUpdate(to, from, next) {\n    const { id } = to.params;\n\n    if (id === from.params.id) return next();\n\n    this.pending = true;\n    const [err, user] = await flatry(getUser(axiosInstance, id));\n    this.pending = false;\n\n    if (err) {\n      console.error(err);\n      next(false);\n    } else {\n      this.user = user;\n      next();\n    }\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=1a420bd3&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport \"./index.styl?vue&type=style&index=0&id=1a420bd3&lang=stylus&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1a420bd3\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./index.styl?vue&type=style&index=0&id=e13a1f92&lang=stylus&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./index.styl?vue&type=style&index=0&id=7fa455a4&lang=stylus&scoped=true\"","<template>\n  <div>\n    <SettingsForm\n      :user=\"user\"\n      :isMe=\"isMe\"\n      :pending=\"settingsPending\"\n      @submit=\"onSettingsUpdate\"\n    />\n\n    <TokensTable\n      :tokens=\"tokens\"\n      :pending=\"tokensPending\"\n      class=\"p-mt-3\"\n      @delete=\"onTokenDelete\"\n    />\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>\n","<template>\n  <Card>\n    <template #title>\n      Настройки\n    </template>\n\n    <template #content>\n      <form\n        class=\"settings-form\"\n        @submit.prevent=\"onSubmit\"\n      >\n        <div class=\"settings-form__grid\">\n          <label for=\"email\">\n            Email:\n          </label>\n\n          <div>\n            <InputText\n              v-model=\"userData.email\"\n              :disabled=\"pending\"\n              id=\"email\"\n              placeholder=\"example@example.com\"\n              type=\"text\"\n            />\n          </div>\n\n          <label for=\"group\">\n            Отдел:\n          </label>\n\n          <div>\n            <GroupPicker\n              v-model=\"userData.groupId\"\n              :disabled=\"pending\"\n              inputId=\"group\"\n            />\n          </div>\n\n          <template v-if=\"showRoles\">\n            <label for=\"role\">\n              Роль:\n            </label>\n\n            <div>\n              <RolePicker\n                v-model=\"userData.role\"\n                :disabled=\"pending\"\n                inputId=\"role\"\n              />\n            </div>\n          </template>\n        </div>\n\n        <div class=\"p-grid p-mt-2\">\n          <div class=\"p-col-fixed\">\n            <Button\n              :disabled=\"pending\"\n              label=\"Сохранить\"\n              icon=\"pi pi-save\"\n              type=\"submit\"\n            />\n          </div>\n        </div>\n      </form>\n    </template>\n  </Card>\n</template>\n\n<script src=\"./index.js\"></script>\n\n<style\n  src=\"./index.styl\"\n  lang=\"stylus\"\n  scoped\n></style>\n","import Card from 'primevue/card';\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\n\nimport GroupPicker from '@/components/group/picker';\nimport RolePicker from '@/components/role/picker';\n\nexport default {\n  Card,\n  InputText,\n  Button,\n  GroupPicker,\n  RolePicker,\n};\n","import { mapGetters } from 'vuex';\n\nimport components from './components';\n\nexport default {\n  components,\n\n  props: {\n    user: {\n      type: Object,\n      required: true,\n    },\n\n    isMe: {\n      type: Boolean,\n      default: false,\n    },\n\n    pending: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: ['submit'],\n\n  data() {\n    return {\n      userData: null,\n    };\n  },\n\n  computed: {\n    ...mapGetters('user', ['isAdmin']),\n\n    userIsAdmin() {\n      return this.user.role === 0;\n    },\n\n    showRoles() {\n      return this.isAdmin && (this.isMe || !this.userIsAdmin);\n    },\n  },\n\n  watch: {\n    user: {\n      handler: 'resetUserData',\n      immediate: true,\n    },\n  },\n\n  methods: {\n    resetUserData() {\n      const { email, groupId = null, role = 2 } = this.user;\n\n      this.userData = {\n        email,\n        groupId,\n        role,\n      };\n    },\n\n    onSubmit() {\n      const data = { ...this.userData };\n\n      if (!this.showRoles) delete data.role;\n\n      this.$emit('submit', data);\n    },\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=7fa455a4&scoped=true\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport \"./index.styl?vue&type=style&index=0&id=7fa455a4&lang=stylus&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7fa455a4\"\n\nexport default script","<template>\n  <DataTable\n    title=\"Список токенов доступа\"\n    :items=\"tokens\"\n    :pending=\"pending\"\n    :paginator=\"false\"\n    class=\"tokens-table\"\n  >\n    <template #empty>\n      <div class=\"p-text-center\">\n        Токены не найдены\n      </div>\n    </template>\n\n    <Column\n      field=\"id\"\n      header=\"#\"\n      headerClass=\"p-text-center\"\n      bodyClass=\"p-text-center\"\n    />\n\n    <Column\n      field=\"userAgent\"\n      header=\"UserAgent\"\n      bodyClass=\"tokens-table__user-agent\"\n    />\n\n    <Column\n      field=\"ip\"\n      header=\"Ip-адрес\"\n    />\n\n    <Column\n      field=\"createdAt\"\n      header=\"Дата\"\n    >\n      <template #body=\"{ data }\">\n        <DateView :value=\"data.createdAt\" />\n      </template>\n    </Column>\n\n    <Column\n      field=\"actions\"\n      header=\"#\"\n    >\n      <template #body=\"{ data }\">\n        <i\n          class=\"pi pi-trash\"\n          @click.stop=\"onDelete(data)\"\n        />\n      </template>\n    </Column>\n  </DataTable>\n</template>\n\n<script src=\"./index.js\"></script>\n\n<style\n  src=\"./index.styl\"\n  lang=\"stylus\"\n></style>\n","import Column from 'primevue/column';\n\nimport DataTable from '@/components/table';\nimport DateView from '@/components/date';\n\nexport default {\n  components: {\n    Column,\n    DataTable,\n    DateView,\n  },\n\n  props: {\n    tokens: {\n      type: Array,\n      default: () => [],\n    },\n\n    pending: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: ['delete'],\n\n  methods: {\n    onDelete(token) {\n      this.$emit('delete', token);\n    },\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=7863f814\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\n\nimport \"./index.styl?vue&type=style&index=0&lang=stylus\"\nscript.render = render\n\nexport default script","import flatry from 'flatry';\n\nimport {\n  getUserTokens, getTokens, revokeToken, updateUser,\n} from '@/api/user';\n\nimport SettingsForm from './settings-form';\nimport TokensTable from './tokens-table';\n\nexport default {\n  components: {\n    SettingsForm,\n    TokensTable,\n  },\n\n  props: {\n    user: {\n      type: Object,\n      required: true,\n    },\n\n    isMe: {\n      type: Boolean,\n      required: true,\n    },\n  },\n\n  emits: ['update'],\n\n  data() {\n    return {\n      tokens: [],\n      tokensPending: true,\n\n      settingsPending: false,\n    };\n  },\n\n  methods: {\n    async loadTokens() {\n      const method = this.isMe ? getTokens : getUserTokens;\n\n      this.tokensPending = true;\n      const [err, tokens = []] = await flatry(method(this.$axios, this.user.id));\n\n      if (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: err.serverError || 'Ошибка загрузки токенов',\n          life: 5000,\n        });\n        this.tokensPending = false;\n        return;\n      }\n\n      this.tokens = tokens;\n      this.tokensPending = false;\n    },\n\n    async onTokenDelete(token) {\n      const { id } = token;\n\n      this.tokensPending = true;\n      const [err] = await flatry(revokeToken(this.$axios, id));\n\n      if (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: err.serverError || 'Ошибка при удалении токена',\n          life: 5000,\n        });\n        this.tokensPending = false;\n        return;\n      }\n\n      const tokenIndex = this.tokens.indexOf(token);\n      if (~tokenIndex) {\n        this.tokens.splice(tokenIndex, 1);\n      }\n\n      this.$toast.add({\n        severity: 'success',\n        summary: 'Токен успешно удалён',\n        life: 5000,\n      });\n      this.tokensPending = false;\n    },\n\n    async onSettingsUpdate(data) {\n      const { id } = this.user;\n\n      this.settingsPending = true;\n      const [err] = await flatry(updateUser(this.$axios, id, data));\n\n      if (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: err.serverError || 'Ошибка при изменении настроек',\n          life: 5000,\n        });\n        this.settingsPending = false;\n        return;\n      }\n\n      this.$toast.add({\n        severity: 'success',\n        summary: 'Настройки успешно изменены',\n        life: 5000,\n      });\n      this.$emit('update');\n\n      this.settingsPending = false;\n    },\n  },\n\n  async mounted() {\n    await this.loadTokens();\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=0d65b2d6\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!./index.styl?vue&type=style&index=0&id=1a420bd3&lang=stylus&scoped=true\"","<template>\n  <div class=\"profile\">\n    <TaskFilter\n      :pending=\"pending\"\n      v-model:title=\"filter.title\"\n      v-model:status=\"filter.status\"\n      v-model:groupId=\"filter.groupId\"\n      :hideGroup=\"hasGroup\"\n      hideUser\n      @submit=\"onFilter\"\n    />\n\n    <TaskTable\n      :title=\"tableTitle\"\n      :tasks=\"tasks\"\n      :pending=\"pending\"\n      :page=\"meta && meta.page\"\n      :perPage=\"meta && meta.perPage\"\n      :totalCount=\"meta && meta.totalCount\"\n      class=\"p-mt-3\"\n      @page=\"onChangePage\"\n    />\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>\n","import flatry from 'flatry';\n\nimport TaskFilter from '@/components/task/filter';\nimport TaskTable from '@/components/task/table';\n\nimport { getTasks } from '@/api/task';\n\nexport default {\n  components: {\n    TaskFilter,\n    TaskTable,\n  },\n\n  props: {\n    user: {\n      type: Object,\n      required: true,\n    },\n\n    isMe: {\n      type: Boolean,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      pending: true,\n\n      tasks: [],\n      meta: null,\n\n      filter: {\n        title: '',\n        status: null,\n        userId: null,\n        groupId: null,\n      },\n    };\n  },\n\n  computed: {\n    tableTitle() {\n      return this.isMe\n        ? 'Мои задачи'\n        : 'Задачи';\n    },\n\n    hasGroup() {\n      return this.user.groupId !== null;\n    },\n  },\n\n  watch: {\n    user: {\n      async handler(newVal) {\n        const { id, groupId } = newVal;\n\n        this.filter.userId = id;\n        if (groupId) this.filter.groupId = groupId;\n\n        await this.loadTasks();\n      },\n      immediate: true,\n    },\n  },\n\n  methods: {\n    onFilter() {\n      this.loadTasks();\n    },\n\n    onChangePage(event) {\n      this.loadTasks(event.page + 1, event.rows);\n    },\n\n    async loadTasks(page = 1, perPage = 20) {\n      const query = {\n        ...this.filter,\n        page,\n        perPage,\n      };\n\n      this.pending = true;\n      const [err, { items, meta = null } = {}] = await flatry(getTasks(this.$axios, query));\n\n      if (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: err.serverError || 'Ошибка загрузки задач',\n          life: 5000,\n        });\n        this.pending = false;\n        return;\n      }\n\n      this.tasks = items;\n      this.meta = meta;\n      this.pending = false;\n    },\n  },\n};\n","import { render } from \"./index.vue?vue&type=template&id=451babb5\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}